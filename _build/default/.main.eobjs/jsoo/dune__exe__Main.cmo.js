// Generated by js_of_ocaml
//# buildInfo:effects=false, kind=cmo, use-js-string=true, version=5.9.1

//# unitInfo: Provides: Dune__exe__Main
//# unitInfo: Requires: Js_of_ocaml__Dom, Js_of_ocaml__Dom_html, Js_of_ocaml__Firebug, Js_of_ocaml__Js, Js_of_ocaml_lwt__Lwt_js, Js_of_ocaml_lwt__Lwt_js_events, Lwt, Stdlib, Stdlib__Printf
(function
  (globalThis){
   "use strict";
   var
    runtime = globalThis.jsoo_runtime,
    cst_lime = "lime",
    cst_px$3 = "px",
    caml_jsstring_of_string = runtime.caml_jsstring_of_string,
    caml_maybe_attach_backtrace = runtime.caml_maybe_attach_backtrace,
    caml_wrap_exception = runtime.caml_wrap_exception;
   function caml_call1(f, a0){
    return (f.l >= 0 ? f.l : f.l = f.length) === 1
            ? f(a0)
            : runtime.caml_call_gen(f, [a0]);
   }
   function caml_call2(f, a0, a1){
    return (f.l >= 0 ? f.l : f.l = f.length) === 2
            ? f(a0, a1)
            : runtime.caml_call_gen(f, [a0, a1]);
   }
   function caml_call3(f, a0, a1, a2){
    return (f.l >= 0 ? f.l : f.l = f.length) === 3
            ? f(a0, a1, a2)
            : runtime.caml_call_gen(f, [a0, a1, a2]);
   }
   function caml_call5(f, a0, a1, a2, a3, a4){
    return (f.l >= 0 ? f.l : f.l = f.length) === 5
            ? f(a0, a1, a2, a3, a4)
            : runtime.caml_call_gen(f, [a0, a1, a2, a3, a4]);
   }
   var
    global_data = runtime.caml_get_global_data(),
    Stdlib = global_data.Stdlib,
    Js_of_ocaml_lwt_Lwt_js = global_data.Js_of_ocaml_lwt__Lwt_js,
    Lwt = global_data.Lwt,
    Stdlib_Printf = global_data.Stdlib__Printf,
    Js_of_ocaml_Firebug = global_data.Js_of_ocaml__Firebug,
    Js_of_ocaml_lwt_Lwt_js_events = global_data.Js_of_ocaml_lwt__Lwt_js_events,
    Js_of_ocaml_Dom_html = global_data.Js_of_ocaml__Dom_html,
    Js_of_ocaml_Dom = global_data.Js_of_ocaml__Dom,
    document = Js_of_ocaml_Dom_html[2],
    world = caml_call1(Js_of_ocaml_Dom_html[4], "world"),
    cst_px = cst_px$3,
    cst_px$0 = cst_px$3;
   function move_creet(t16, state){
    if(1 - state[6]){
     var
      w = world.clientWidth,
      h = world.clientHeight,
      nx = state[1] + state[3] | 0,
      ny = state[2] + state[4] | 0;
     a:
     {
      if(0 <= nx && (w - 20 | 0) >= nx){
       var nx$0 = nx, dx = state[3];
       break a;
      }
      var
       _g_ = caml_call2(Stdlib[16], w - 20 | 0, nx),
       _h_ = caml_call2(Stdlib[17], 0, _g_),
       nx$0 = _h_,
       dx = - state[3] | 0;
     }
     a:
     {
      if(0 <= ny && (h - 20 | 0) >= ny){
       var ny$0 = ny, dy = state[4];
       break a;
      }
      var
       _i_ = caml_call2(Stdlib[16], h - 20 | 0, ny),
       _j_ = caml_call2(Stdlib[17], 0, _i_),
       ny$0 = _j_,
       dy = - state[4] | 0;
     }
     state[3] = dx;
     state[4] = dy;
     state[1] = nx$0;
     state[2] = ny$0;
     a:
     {
      if(50 > state[2] && ! state[5]){
       var t15 = t16.style;
       t15.backgroundColor = "red";
       var infected = 1;
       break a;
      }
      if(state[5] && (h - 70 | 0) < state[2]){
       var t18 = t16.style;
       t18.backgroundColor = cst_lime;
       var infected = 0;
       break a;
      }
      var infected = state[5];
     }
     state[5] = infected;
     var
      _k_ = caml_call1(Stdlib[33], state[1]),
      t20 = caml_jsstring_of_string(caml_call2(Stdlib[28], _k_, cst_px)),
      t21 = t16.style;
     t21.left = t20;
     var
      _l_ = caml_call1(Stdlib[33], state[2]),
      t23 = caml_jsstring_of_string(caml_call2(Stdlib[28], _l_, cst_px$0)),
      t24 = t16.style;
     t24.top = t23;
    }
    var
     delay = state[5] ? 0.05 : 0.03,
     ppx_lwt_0 = caml_call1(Js_of_ocaml_lwt_Lwt_js[1], delay);
    return caml_call3
            (Lwt[81],
             function(exn){
              try{throw caml_maybe_attach_backtrace(exn, 0);}
              catch(exn){var exn$0 = caml_wrap_exception(exn); return exn$0;}
             },
             ppx_lwt_0,
             function(param){return move_creet(t16, state);});
   }
   var t27 = caml_call1(Js_of_ocaml_Dom_html[51], document);
   t27.className = "creet";
   var t4 = t27.style;
   t4.backgroundColor = cst_lime;
   var
    _a_ = caml_call1(Stdlib[33], 200),
    t6 = caml_jsstring_of_string(caml_call2(Stdlib[28], _a_, cst_px$3)),
    t7 = t27.style;
   t7.left = t6;
   var
    _b_ = caml_call1(Stdlib[33], 200),
    t9 = caml_jsstring_of_string(caml_call2(Stdlib[28], _b_, cst_px$3)),
    t10 = t27.style;
   t10.top = t9;
   caml_call2(Js_of_ocaml_Dom[5], world, t27);
   var initial_state = [0, 200, 200, 3, 2, 0, 0];
   caml_call1
    (Lwt[11], function(param){return move_creet(t27, initial_state);});
   var
    cst_px$1 = cst_px$3,
    cst_px$2 = cst_px$3,
    _c_ =
      [0,
       [11, "Dragging to: x=", [4, 0, 0, 0, [11, ", y=", [4, 0, 0, 0, 0]]]],
       "Dragging to: x=%d, y=%d"];
   caml_call1
    (Lwt[11],
     function(param){
      var
       offset_x = [0, 0],
       offset_y = [0, 0],
       world_rect = [0, world.getBoundingClientRect()];
      caml_call1
       (Lwt[11],
        function(param){
         return caml_call5
                 (Js_of_ocaml_lwt_Lwt_js_events[82],
                  0,
                  0,
                  0,
                  t27,
                  function(t28, param){
                   initial_state[6] = 1;
                   world_rect[1] = world.getBoundingClientRect();
                   var rect = t27.getBoundingClientRect();
                   offset_x[1] = t28.clientX - rect.left | 0;
                   offset_y[1] = t28.clientY - rect.top | 0;
                   return Lwt[36];
                  });
        });
      caml_call1
       (Lwt[11],
        function(param){
         return caml_call5
                 (Js_of_ocaml_lwt_Lwt_js_events[83],
                  0,
                  0,
                  0,
                  document,
                  function(param, _f_){initial_state[6] = 0; return Lwt[36];});
        });
      caml_call1
       (Lwt[11],
        function(param){
         return caml_call5
                 (Js_of_ocaml_lwt_Lwt_js_events[85],
                  0,
                  0,
                  0,
                  document,
                  function(t32, param){
                   if(initial_state[6]){
                    var
                     t33 = world_rect[1],
                     nx = (t32.clientX - t33.left | 0) - offset_x[1] | 0,
                     ny = (t32.clientY - t33.top | 0) - offset_y[1] | 0;
                    initial_state[1] = nx;
                    initial_state[2] = ny;
                    var
                     _d_ = caml_call1(Stdlib[33], nx),
                     t37 =
                       caml_jsstring_of_string
                        (caml_call2(Stdlib[28], _d_, cst_px$1)),
                     t38 = t27.style;
                    t38.left = t37;
                    var
                     _e_ = caml_call1(Stdlib[33], ny),
                     t40 =
                       caml_jsstring_of_string
                        (caml_call2(Stdlib[28], _e_, cst_px$2)),
                     t41 = t27.style;
                    t41.top = t40;
                    var
                     t42 =
                       caml_jsstring_of_string
                        (caml_call3(Stdlib_Printf[4], _c_, nx, ny)),
                     t43 = Js_of_ocaml_Firebug[1];
                    t43.log(t42);
                   }
                   return Lwt[36];
                  });
        });
      return Lwt[36];
     });
   var Dune_exe_Main = [0];
   runtime.caml_register_global(55, Dune_exe_Main, "Dune__exe__Main");
   return;
  }
  (globalThis));

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLm1haW4uZW9ianMvanNvby9kdW5lX19leGVfX01haW4uY21vLmpzIiwic2VjdGlvbnMiOlt7Im9mZnNldCI6eyJsaW5lIjo5LCJjb2x1bW4iOjB9LCJtYXAiOnsidmVyc2lvbiI6MywiZmlsZSI6Ii5tYWluLmVvYmpzL2pzb28vZHVuZV9fZXhlX19NYWluLmNtby5qcyIsIm5hbWVzIjpbInJ1bnRpbWUiLCJjc3RfbGltZSIsImNzdF9weCIsImNhbWxfanNzdHJpbmdfb2Zfc3RyaW5nIiwiY2FtbF9tYXliZV9hdHRhY2hfYmFja3RyYWNlIiwiY2FtbF93cmFwX2V4Y2VwdGlvbiIsImNhbWxfY2FsbDEiLCJmIiwiYTAiLCJjYW1sX2NhbGwyIiwiYTEiLCJjYW1sX2NhbGwzIiwiYTIiLCJjYW1sX2NhbGw1IiwiYTMiLCJhNCIsImdsb2JhbF9kYXRhIiwiU3RkbGliIiwiSnNfb2Zfb2NhbWxfbHd0X0x3dF9qcyIsIkx3dCIsIlN0ZGxpYl9QcmludGYiLCJKc19vZl9vY2FtbF9GaXJlYnVnIiwiSnNfb2Zfb2NhbWxfbHd0X0x3dF9qc19ldmVudHMiLCJKc19vZl9vY2FtbF9Eb21faHRtbCIsIkpzX29mX29jYW1sX0RvbSIsImRvY3VtZW50Iiwid29ybGQiLCJtb3ZlX2NyZWV0IiwidDE2Iiwic3RhdGUiLCJ3IiwiaCIsIm54IiwibnkiLCJkeCIsImR5IiwidDE1IiwiaW5mZWN0ZWQiLCJ0MTgiLCJ0MjAiLCJ0MjEiLCJ0MjMiLCJ0MjQiLCJkZWxheSIsInBweF9sd3RfMCIsImV4biIsInBhcmFtIiwidDI3IiwidDQiLCJ0NiIsInQ3IiwidDkiLCJ0MTAiLCJpbml0aWFsX3N0YXRlIiwib2Zmc2V0X3giLCJvZmZzZXRfeSIsIndvcmxkX3JlY3QiLCJ0MjgiLCJyZWN0IiwidDMyIiwidDMzIiwidDM3IiwidDM4IiwidDQwIiwidDQxIiwidDQyIiwidDQzIiwiRHVuZV9leGVfTWFpbiJdLCJzb3VyY2VzIjpbIi9idWlsdGluL2JsYWNrYm94Lm1sIiwiL3dvcmtzcGFjZV9y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QUFBLGlCQUFBVjtBQUFBQSxTQUNFO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLDJCQUFBVyxLQUFBWDtBQUFBQSxtQkFDSTtBQUFBLG1CQUNjO0FBQUEsdUJBQUFZLE9BQ0g7QUFBQSxtQkFDd0Q7QUFBQSxtQkFDRDtBQUFBLG1CQUNsRTtBQUFBLGtCQUFlLEVBQUM7QUFBQTtBQUFBLE1BSXRCO0FBQUE7QUFBQSxpQkFBQVo7QUFBQUEsU0FDRTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSwyQkFBQUEsT0FBQSxLQUNJLHNCQUNBLGVBQWUsRUFBQztBQUFBO0FBQUEsTUFJdEI7QUFBQTtBQUFBLGlCQUFBQTtBQUFBQSxTQUNFO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLDJCQUFBYSxLQUFBYjtBQUFBQSxtQkFDSTtBQUFBO0FBQUEscUJBQUFjLE1BQStCO0FBQUEscUJBQUE1QixLQUVpQztBQUFBLHFCQUFBQyxLQUNEO0FBQUEsb0JBRzdEO0FBQUEsb0JBQ0E7QUFBQTtBQUFBLDJCQUMrQjtBQUFBLHFCQUFBNEI7QUFBQUEsdUJBQVg7QUFBQSx5QkFBVTtBQUFBLHFCQUFBQyxNQUE5QjtBQUFBO0FBQUE7QUFBQSwyQkFDOEI7QUFBQSxxQkFBQUM7QUFBQUEsdUJBQVg7QUFBQSx5QkFBVTtBQUFBLHFCQUFBQyxNQUE3QjtBQUFBO0FBQUE7QUFBQSxxQkFBQUM7QUFBQUEsdUJBR29CO0FBQUEseUJBQVc7QUFBQSxxQkFBQUMsTUFBaUQ7QUFBQSxvQkFBaEY7QUFBQTtBQUFBLG1CQUVGO0FBQUEsa0JBQWUsRUFBQztBQUFBO0FBQUEsTUFDckI7QUFBQSxLQWtCa0Q7QUFBQSxPQUFBQyxnQkFBQztBQUFBO0FBQUE7QUFBQSxFRG5JdEQiLCJzb3VyY2VzQ29udGVudCI6WyIoKiBnZW5lcmF0ZWQgY29kZSAqKSIsIm9wZW4gSnNfb2Zfb2NhbWxcclxub3BlbiBKc19vZl9vY2FtbF9sd3RcclxuXHJcbmxldCBkb2N1bWVudCA9IERvbV9odG1sLmRvY3VtZW50XHJcbmxldCB3b3JsZCA9IERvbV9odG1sLmdldEVsZW1lbnRCeUlkX2V4biBcIndvcmxkXCJcclxuXHJcbigqINCe0LHRidC10LUg0YHQvtGB0YLQvtGP0L3QuNC1INC00LvRjyDQvtC00L3QvtCz0L4gXCLQutGA0LjRgtCwXCIsINGH0YLQvtCx0Ysg0YTRg9C90LrRhtC40Lgg0LzQvtCz0LvQuCDQvtCx0LzQtdC90LjQstCw0YLRjNGB0Y8g0LTQsNC90L3Ri9C80LggKilcclxudHlwZSBjcmVldF9zdGF0ZSA9IHtcclxuICBtdXRhYmxlIHg6IGludDtcclxuICBtdXRhYmxlIHk6IGludDtcclxuICBtdXRhYmxlIGR4OiBpbnQ7XHJcbiAgbXV0YWJsZSBkeTogaW50O1xyXG4gIG11dGFibGUgaW5mZWN0ZWQ6IGJvb2w7XHJcbiAgbXV0YWJsZSBpc19iZWluZ19kcmFnZ2VkOiBib29sOyAoKiDQpNC70LDQsywg0L/QvtC60LDQt9GL0LLQsNGO0YnQuNC5LCDRh9GC0L4g0L7QsdGK0LXQutGCINC/0LXRgNC10YLQsNGB0LrQuNCy0LDRjtGCICopXHJcbn1cclxuXHJcbigqINCh0L7Qt9C00LDQvdC40LUg0L3QvtCy0L7Qs9C+IENyZWV0ICopXHJcbmxldCBjcmVhdGVfY3JlZXQgY29sb3IgeCB5ID1cclxuICBsZXQgZCA9IERvbV9odG1sLmNyZWF0ZURpdiBkb2N1bWVudCBpblxyXG4gIGQjIy5jbGFzc05hbWUgOj0gSnMuc3RyaW5nIFwiY3JlZXRcIjtcclxuICBkIyMuc3R5bGUjIy5iYWNrZ3JvdW5kQ29sb3IgOj0gSnMuc3RyaW5nIGNvbG9yO1xyXG4gIGQjIy5zdHlsZSMjLmxlZnQgOj0gSnMuc3RyaW5nIChzdHJpbmdfb2ZfaW50IHggXiBcInB4XCIpO1xyXG4gIGQjIy5zdHlsZSMjLnRvcCA6PSBKcy5zdHJpbmcgKHN0cmluZ19vZl9pbnQgeSBeIFwicHhcIik7XHJcbiAgRG9tLmFwcGVuZENoaWxkIHdvcmxkIGQ7XHJcbiAgZFxyXG5cclxuKCog0KTRg9C90LrRhtC40Y8g0LDQstGC0L7QvNCw0YLQuNGH0LXRgdC60L7Qs9C+INC00LLQuNC20LXQvdC40Y8gKilcclxubGV0IHJlYyBtb3ZlX2NyZWV0IGQgc3RhdGUgPVxyXG4gICgqINCU0LLQuNCz0LDQtdC80YHRjywg0YLQvtC70YzQutC+INC10YHQu9C4INC90LDRgSDQvdC1INC/0LXRgNC10YLQsNGB0LrQuNCy0LDRjtGCINCy0YDRg9GH0L3Rg9GOICopXHJcbiAgaWYgbm90IHN0YXRlLmlzX2JlaW5nX2RyYWdnZWQgdGhlbiAoXHJcbiAgICBsZXQgdyA9IHdvcmxkIyMuY2xpZW50V2lkdGggYW5kIGggPSB3b3JsZCMjLmNsaWVudEhlaWdodCBpblxyXG4gICAgbGV0IG54ID0gc3RhdGUueCArIHN0YXRlLmR4IGFuZCBueSA9IHN0YXRlLnkgKyBzdGF0ZS5keSBpblxyXG5cclxuICAgICgqINCe0YLRgNCw0LbQtdC90LjQtSDQvtGCINGB0YLQtdC9ICopXHJcbiAgICBsZXQgZHgsIG54ID1cclxuICAgICAgaWYgbnggPCAwIHx8IG54ID4gdyAtIDIwIHRoZW4gKC1zdGF0ZS5keCwgbWF4IDAgKG1pbiAodyAtIDIwKSBueCkpIGVsc2UgKHN0YXRlLmR4LCBueClcclxuICAgIGluXHJcbiAgICBsZXQgZHksIG55ID1cclxuICAgICAgaWYgbnkgPCAwIHx8IG55ID4gaCAtIDIwIHRoZW4gKC1zdGF0ZS5keSwgbWF4IDAgKG1pbiAoaCAtIDIwKSBueSkpIGVsc2UgKHN0YXRlLmR5LCBueSlcclxuICAgIGluXHJcbiAgICBcclxuICAgICgqINCe0LHQvdC+0LLQu9GP0LXQvCDQvtCx0YnQtdC1INGB0L7RgdGC0L7Rj9C90LjQtSAqKVxyXG4gICAgc3RhdGUuZHggPC0gZHg7XHJcbiAgICBzdGF0ZS5keSA8LSBkeTtcclxuICAgIHN0YXRlLnggPC0gbng7XHJcbiAgICBzdGF0ZS55IDwtIG55O1xyXG5cclxuICAgICgqIC0tLSDQl9CQ0KDQkNCW0JXQndCY0JUg0Jgg0JvQldCn0JXQndCY0JUgLS0tICopXHJcbiAgICBsZXQgaW5mZWN0ZWQgPVxyXG4gICAgICBpZiBzdGF0ZS55IDwgNTAgJiYgbm90IHN0YXRlLmluZmVjdGVkIHRoZW4gKFxyXG4gICAgICAgIGQjIy5zdHlsZSMjLmJhY2tncm91bmRDb2xvciA6PSBKcy5zdHJpbmcgXCJyZWRcIjsgdHJ1ZVxyXG4gICAgICApIGVsc2UgaWYgc3RhdGUuaW5mZWN0ZWQgJiYgc3RhdGUueSA+IGggLSA3MCB0aGVuIChcclxuICAgICAgICBkIyMuc3R5bGUjIy5iYWNrZ3JvdW5kQ29sb3IgOj0gSnMuc3RyaW5nIFwibGltZVwiOyBmYWxzZVxyXG4gICAgICApIGVsc2Ugc3RhdGUuaW5mZWN0ZWRcclxuICAgIGluXHJcbiAgICBzdGF0ZS5pbmZlY3RlZCA8LSBpbmZlY3RlZDtcclxuXHJcbiAgICAoKiDQntCx0L3QvtCy0LvQtdC90LjQtSDQv9C+0LfQuNGG0LjQuCDQsiBET00gKilcclxuICAgIGQjIy5zdHlsZSMjLmxlZnQgOj0gSnMuc3RyaW5nIChzdHJpbmdfb2ZfaW50IHN0YXRlLnggXiBcInB4XCIpO1xyXG4gICAgZCMjLnN0eWxlIyMudG9wIDo9IEpzLnN0cmluZyAoc3RyaW5nX29mX2ludCBzdGF0ZS55IF4gXCJweFwiKTtcclxuICApO1xyXG5cclxuICAoKiDQn9Cw0YPQt9CwINC/0LXRgNC10LQg0YHQu9C10LTRg9GO0YnQuNC8INGI0LDQs9C+0LwgKilcclxuICBsZXQgZGVsYXkgPSBpZiBzdGF0ZS5pbmZlY3RlZCB0aGVuIDAuMDUgZWxzZSAwLjAzIGluXHJcbiAgbGV0JWx3dCAoKSA9IEx3dF9qcy5zbGVlcCBkZWxheSBpblxyXG4gIG1vdmVfY3JlZXQgZCBzdGF0ZVxyXG5cclxuXHJcbigqINCk0YPQvdC60YbQuNGPINC00LvRjyDQv9C10YDQtdGC0LDRgdC60LjQstCw0L3QuNGPICopXHJcbmxldCBtYWtlX2RyYWdnYWJsZSBkIHN0YXRlID1cclxuICBsZXQgb3BlbiBMd3RfanNfZXZlbnRzIGluXHJcbiAgbGV0IG9mZnNldF94ID0gcmVmIDAgYW5kIG9mZnNldF95ID0gcmVmIDAgaW5cclxuICAoKiDQmNGB0L/QvtC70YzQt9GD0LXQvCByZWYg0LTQu9GPIHdvcmxkX3JlY3QsINGH0YLQvtCx0Ysg0L7QsdC90L7QstC70Y/RgtGMINC10LPQviDQv9GA0Lgg0LrQsNC20LTQvtC8INC90LDQttCw0YLQuNC4ICopXHJcbiAgbGV0IHdvcmxkX3JlY3QgPSByZWYgKHdvcmxkIyNnZXRCb3VuZGluZ0NsaWVudFJlY3QpIGluXHJcblxyXG4gICgqIEZJWDog0JfQsNC/0YPRgdC60LDQtdC8INC60LDQttC00YvQuSDQvtCx0YDQsNCx0L7RgtGH0LjQuiDRgdC+0LHRi9GC0LjQuSDQsNGB0LjQvdGF0YDQvtC90L3Qviwg0YfRgtC+0LHRiyDQvtC90Lgg0YDQsNCx0L7RgtCw0LvQuCDQv9Cw0YDQsNC70LvQtdC70YzQvdC+LCDQsCDQvdC1INC/0L7RgdC70LXQtNC+0LLQsNGC0LXQu9GM0L3Qvi4gKilcclxuXHJcbiAgKCog0J3QsNC20LDRgtC40LUg0LrQvdC+0L/QutC4INC80YvRiNC4OiDQvdCw0YfQuNC90LDQtdC8INC/0LXRgNC10YLQsNGB0LrQuNCy0LDQvdC40LUgKilcclxuICBMd3QuYXN5bmMgKGZ1biAoKSAtPlxyXG4gICAgbW91c2Vkb3ducyBkIChmdW4gZXYgXyAtPlxyXG4gICAgICAgIHN0YXRlLmlzX2JlaW5nX2RyYWdnZWQgPC0gdHJ1ZTtcclxuICAgICAgICB3b3JsZF9yZWN0IDo9IHdvcmxkIyNnZXRCb3VuZGluZ0NsaWVudFJlY3Q7ICgqINCe0LHQvdC+0LLQu9GP0LXQvCDQs9C10L7QvNC10YLRgNC40Y4g0L3QsCDRgdC70YPRh9Cw0Lkg0YHQtNCy0LjQs9CwINGB0YLRgNCw0L3QuNGG0YsgKilcclxuICAgICAgICBsZXQgcmVjdCA9IGQjI2dldEJvdW5kaW5nQ2xpZW50UmVjdCBpblxyXG4gICAgICAgIG9mZnNldF94IDo9IGludF9vZl9mbG9hdCAoZmxvYXRfb2ZfaW50IGV2IyMuY2xpZW50WCAtLiByZWN0IyMubGVmdCk7XHJcbiAgICAgICAgb2Zmc2V0X3kgOj0gaW50X29mX2Zsb2F0IChmbG9hdF9vZl9pbnQgZXYjIy5jbGllbnRZIC0uIHJlY3QjIy50b3ApO1xyXG4gICAgICAgIEx3dC5yZXR1cm5fdW5pdClcclxuICApO1xyXG5cclxuICAoKiDQntGC0L/Rg9GB0LrQsNC90LjQtSDQutC90L7Qv9C60Lgg0LzRi9GI0Lg6INC30LDQutCw0L3Rh9C40LLQsNC10Lwg0L/QtdGA0LXRgtCw0YHQutC40LLQsNC90LjQtSAqKVxyXG4gIEx3dC5hc3luYyAoZnVuICgpIC0+XHJcbiAgICBtb3VzZXVwcyBkb2N1bWVudCAoZnVuIF8gXyAtPlxyXG4gICAgICAgIHN0YXRlLmlzX2JlaW5nX2RyYWdnZWQgPC0gZmFsc2U7XHJcbiAgICAgICAgTHd0LnJldHVybl91bml0KVxyXG4gICk7XHJcbiAgXHJcbiAgKCog0JTQstC40LbQtdC90LjQtSDQvNGL0YjQuCAqKVxyXG4gIEx3dC5hc3luYyAoZnVuICgpIC0+XHJcbiAgICBtb3VzZW1vdmVzIGRvY3VtZW50IChmdW4gZXYgXyAtPlxyXG4gICAgICAgIGlmIHN0YXRlLmlzX2JlaW5nX2RyYWdnZWQgdGhlbiAoXHJcbiAgICAgICAgICBsZXQgd3IgPSAhd29ybGRfcmVjdCBpblxyXG4gICAgICAgICAgbGV0IG54ID0gaW50X29mX2Zsb2F0IChmbG9hdF9vZl9pbnQgZXYjIy5jbGllbnRYIC0uIHdyIyMubGVmdCkgLSAhb2Zmc2V0X3ggaW5cclxuICAgICAgICAgIGxldCBueSA9IGludF9vZl9mbG9hdCAoZmxvYXRfb2ZfaW50IGV2IyMuY2xpZW50WSAtLiB3ciMjLnRvcCkgLSAhb2Zmc2V0X3kgaW5cclxuICAgICAgICAgIFxyXG4gICAgICAgICAgKCog0J7QsdC90L7QstC70Y/QtdC8INC4INGB0L7RgdGC0L7Rj9C90LjQtSwg0Lgg0L/QvtC30LjRhtC40Y4g0LIgRE9NICopXHJcbiAgICAgICAgICBzdGF0ZS54IDwtIG54O1xyXG4gICAgICAgICAgc3RhdGUueSA8LSBueTtcclxuICAgICAgICAgIGQjIy5zdHlsZSMjLmxlZnQgOj0gSnMuc3RyaW5nIChzdHJpbmdfb2ZfaW50IG54IF4gXCJweFwiKTtcclxuICAgICAgICAgIGQjIy5zdHlsZSMjLnRvcCA6PSBKcy5zdHJpbmcgKHN0cmluZ19vZl9pbnQgbnkgXiBcInB4XCIpO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAoKiDQktGL0LLQvtC00LjQvCDQsiDQutC+0L3RgdC+0LvRjCDQtNC70Y8g0L/RgNC+0LLQtdGA0LrQuCAqKVxyXG4gICAgICAgICAgRmlyZWJ1Zy5jb25zb2xlIyNsb2coSnMuc3RyaW5nIChQcmludGYuc3ByaW50ZiBcIkRyYWdnaW5nIHRvOiB4PSVkLCB5PSVkXCIgbnggbnkpKTtcclxuICAgICAgICApO1xyXG4gICAgICAgIEx3dC5yZXR1cm5fdW5pdClcclxuICApO1xyXG5cclxuICBMd3QucmV0dXJuX3VuaXQgKCog0KTRg9C90LrRhtC40Y8g0L3QsNGB0YLRgNC+0LnQutC4INCy0L7Qt9Cy0YDQsNGJ0LDQtdGC0YHRjyDRgdGA0LDQt9GDICopXHJcblxyXG4oKiDQk9C70LDQstC90LDRjyDRhNGD0L3QutGG0LjRjyAqKVxyXG5sZXQgKCkgPVxyXG4gIGxldCBjID0gY3JlYXRlX2NyZWV0IFwibGltZVwiIDIwMCAyMDAgaW5cclxuICAoKiDQodC+0LfQtNCw0LXQvCDQvdCw0YfQsNC70YzQvdC+0LUg0YHQvtGB0YLQvtGP0L3QuNC1INC+0LHRitC10LrRgtCwICopXHJcbiAgbGV0IGluaXRpYWxfc3RhdGUgPSB7XHJcbiAgICB4ID0gMjAwO1xyXG4gICAgeSA9IDIwMDtcclxuICAgIGR4ID0gMztcclxuICAgIGR5ID0gMjtcclxuICAgIGluZmVjdGVkID0gZmFsc2U7XHJcbiAgICBpc19iZWluZ19kcmFnZ2VkID0gZmFsc2U7XHJcbiAgfSBpblxyXG4gICgqINCX0LDQv9GD0YHQutCw0LXQvCDQvtCx0LUg0LDRgdC40L3RhdGA0L7QvdC90YvQtSDRhNGD0L3QutGG0LjQuCAo0LTQstC40LbQtdC90LjQtSDQuCDQv9C10YDQtdGC0LDRgdC60LjQstCw0L3QuNC1KSDQv9Cw0YDQsNC70LvQtdC70YzQvdC+ICopXHJcbiAgTHd0LmFzeW5jIChmdW4gKCkgLT4gbW92ZV9jcmVldCBjIGluaXRpYWxfc3RhdGUpO1xyXG4gIEx3dC5hc3luYyAoZnVuICgpIC0+IG1ha2VfZHJhZ2dhYmxlIGMgaW5pdGlhbF9zdGF0ZSk7XHJcbiAgKCkiXSwiaWdub3JlTGlzdCI6WzBdfX1dfQ==
