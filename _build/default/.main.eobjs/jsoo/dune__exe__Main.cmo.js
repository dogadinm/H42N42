// Generated by js_of_ocaml
//# buildInfo:effects=false, kind=cmo, use-js-string=true, version=5.9.1

//# unitInfo: Provides: Dune__exe__Main
//# unitInfo: Requires: Js_of_ocaml__Dom, Js_of_ocaml__Dom_html, Js_of_ocaml__Js, Js_of_ocaml_lwt__Lwt_js, Js_of_ocaml_lwt__Lwt_js_events, Lwt, Stdlib, Stdlib__List, Stdlib__Random
(function
  (globalThis){
   "use strict";
   var
    runtime = globalThis.jsoo_runtime,
    cst_lime$0 = "lime",
    cst_px$5 = "px",
    caml_jsstring_of_string = runtime.caml_jsstring_of_string,
    caml_maybe_attach_backtrace = runtime.caml_maybe_attach_backtrace,
    caml_wrap_exception = runtime.caml_wrap_exception;
   function caml_call1(f, a0){
    return (f.l >= 0 ? f.l : f.l = f.length) === 1
            ? f(a0)
            : runtime.caml_call_gen(f, [a0]);
   }
   function caml_call2(f, a0, a1){
    return (f.l >= 0 ? f.l : f.l = f.length) === 2
            ? f(a0, a1)
            : runtime.caml_call_gen(f, [a0, a1]);
   }
   function caml_call3(f, a0, a1, a2){
    return (f.l >= 0 ? f.l : f.l = f.length) === 3
            ? f(a0, a1, a2)
            : runtime.caml_call_gen(f, [a0, a1, a2]);
   }
   function caml_call5(f, a0, a1, a2, a3, a4){
    return (f.l >= 0 ? f.l : f.l = f.length) === 5
            ? f(a0, a1, a2, a3, a4)
            : runtime.caml_call_gen(f, [a0, a1, a2, a3, a4]);
   }
   var
    global_data = runtime.caml_get_global_data(),
    Stdlib = global_data.Stdlib,
    Js_of_ocaml_lwt_Lwt_js = global_data.Js_of_ocaml_lwt__Lwt_js,
    Lwt = global_data.Lwt,
    Stdlib_List = global_data.Stdlib__List,
    Stdlib_Random = global_data.Stdlib__Random,
    Js_of_ocaml_lwt_Lwt_js_events = global_data.Js_of_ocaml_lwt__Lwt_js_events,
    Js_of_ocaml_Dom_html = global_data.Js_of_ocaml__Dom_html,
    Js_of_ocaml_Dom = global_data.Js_of_ocaml__Dom,
    document = Js_of_ocaml_Dom_html[2],
    world = caml_call1(Js_of_ocaml_Dom_html[4], "world"),
    creets = [0, 0],
    cst_px = cst_px$5,
    cst_px$0 = cst_px$5,
    cst_px$1 = cst_px$5,
    cst_px$2 = cst_px$5,
    cst_px$3 = cst_px$5,
    cst_px$4 = cst_px$5,
    cst_lime = cst_lime$0;
   function move_creet(t13, state){
    if(1 - state[6]){
     var
      w = world.clientWidth,
      h = world.clientHeight,
      nx = state[1] + state[3] | 0,
      ny = state[2] + state[4] | 0;
     a:
     {
      if(0 <= nx && (w - 20 | 0) >= nx){
       var nx$0 = nx, dx = state[3];
       break a;
      }
      var
       _m_ = caml_call2(Stdlib[16], w - 20 | 0, nx),
       _n_ = caml_call2(Stdlib[17], 0, _m_),
       nx$0 = _n_,
       dx = - state[3] | 0;
     }
     a:
     {
      if(0 <= ny && (h - 20 | 0) >= ny){
       var ny$0 = ny, dy = state[4];
       break a;
      }
      var
       _o_ = caml_call2(Stdlib[16], h - 20 | 0, ny),
       _p_ = caml_call2(Stdlib[17], 0, _o_),
       ny$0 = _p_,
       dy = - state[4] | 0;
     }
     state[3] = dx;
     state[4] = dy;
     state[1] = nx$0;
     state[2] = ny$0;
     var _q_ = state[2] < 50 ? 1 : 0;
     if(_q_)
      var _r_ = 1 - state[5], _s_ = _r_ ? 1 - state[6] : _r_;
     else
      var _s_ = _q_;
     if(_s_){state[5] = 1; var t15 = t13.style; t15.backgroundColor = "red";}
     var
      _t_ = caml_call1(Stdlib[33], state[1]),
      t17 = caml_jsstring_of_string(caml_call2(Stdlib[28], _t_, cst_px$1)),
      t18 = t13.style;
     t18.left = t17;
     var
      _u_ = caml_call1(Stdlib[33], state[2]),
      t20 = caml_jsstring_of_string(caml_call2(Stdlib[28], _u_, cst_px$2)),
      t21 = t13.style;
     t21.top = t20;
    }
    var
     delay = state[5] ? 0.05 : 0.03,
     ppx_lwt_0 = caml_call1(Js_of_ocaml_lwt_Lwt_js[1], delay);
    return caml_call3
            (Lwt[81],
             function(exn){
              try{throw caml_maybe_attach_backtrace(exn, 0);}
              catch(exn){var exn$0 = caml_wrap_exception(exn); return exn$0;}
             },
             ppx_lwt_0,
             function(param){return move_creet(t13, state);});
   }
   function add_creet(color, x, y){
    var t24 = caml_call1(Js_of_ocaml_Dom_html[51], document);
    t24.className = "creet";
    var t3 = caml_jsstring_of_string(color), t4 = t24.style;
    t4.backgroundColor = t3;
    var
     _a_ = caml_call1(Stdlib[33], x),
     t6 = caml_jsstring_of_string(caml_call2(Stdlib[28], _a_, cst_px)),
     t7 = t24.style;
    t7.left = t6;
    var
     _b_ = caml_call1(Stdlib[33], y),
     t9 = caml_jsstring_of_string(caml_call2(Stdlib[28], _b_, cst_px$0)),
     t10 = t24.style;
    t10.top = t9;
    caml_call2(Js_of_ocaml_Dom[5], world, t24);
    var
     v = caml_call1(Stdlib_Random[5], 5) - 2 | 0,
     _c_ = 0,
     _d_ = 0,
     _e_ = 0 === v ? 1 : v,
     v$0 = caml_call1(Stdlib_Random[5], 5) - 2 | 0,
     _f_ = 0 === v$0 ? 1 : v$0,
     state = [0, x, y, _f_, _e_, _d_, _c_];
    creets[1] = [0, [0, t24, state], creets[1]];
    caml_call1(Lwt[11], function(param){return move_creet(t24, state);});
    return caml_call1
            (Lwt[11],
             function(param){
              var
               offset_x = [0, 0],
               offset_y = [0, 0],
               world_rect = [0, world.getBoundingClientRect()];
              caml_call1
               (Lwt[11],
                function(param){
                 return caml_call5
                         (Js_of_ocaml_lwt_Lwt_js_events[82],
                          0,
                          0,
                          0,
                          t24,
                          function(t25, param){
                           state[6] = 1;
                           world_rect[1] = world.getBoundingClientRect();
                           var rect = t24.getBoundingClientRect();
                           offset_x[1] = t25.clientX - rect.left | 0;
                           offset_y[1] = t25.clientY - rect.top | 0;
                           return Lwt[36];
                          });
                });
              caml_call1
               (Lwt[11],
                function(param){
                 return caml_call5
                         (Js_of_ocaml_lwt_Lwt_js_events[83],
                          0,
                          0,
                          0,
                          document,
                          function(param, _i_){
                           var h = world.clientHeight, _j_ = state[6];
                           if(_j_)
                            var
                             _k_ = state[5],
                             _l_ = _k_ ? (h - 70 | 0) < state[2] ? 1 : 0 : _k_;
                           else
                            var _l_ = _j_;
                           if(_l_){
                            state[5] = 0;
                            var t32 = t24.style;
                            t32.backgroundColor = cst_lime$0;
                           }
                           state[6] = 0;
                           return Lwt[36];
                          });
                });
              caml_call1
               (Lwt[11],
                function(param){
                 return caml_call5
                         (Js_of_ocaml_lwt_Lwt_js_events[85],
                          0,
                          0,
                          0,
                          document,
                          function(t33, param){
                           if(state[6]){
                            var
                             t34 = world_rect[1],
                             nx = (t33.clientX - t34.left | 0) - offset_x[1] | 0,
                             ny = (t33.clientY - t34.top | 0) - offset_y[1] | 0;
                            state[1] = nx;
                            state[2] = ny;
                            var
                             _g_ = caml_call1(Stdlib[33], nx),
                             t38 =
                               caml_jsstring_of_string
                                (caml_call2(Stdlib[28], _g_, cst_px$3)),
                             t39 = t24.style;
                            t39.left = t38;
                            var
                             _h_ = caml_call1(Stdlib[33], ny),
                             t41 =
                               caml_jsstring_of_string
                                (caml_call2(Stdlib[28], _h_, cst_px$4)),
                             t42 = t24.style;
                            t42.top = t41;
                           }
                           return Lwt[36];
                          });
                });
              return Lwt[36];
             });
   }
   function reproduction_loop(param){
    var
     healthy_exists =
       caml_call2
        (Stdlib_List[33],
         function(param){var st = param[2]; return 1 - st[5];},
         creets[1]);
    if(healthy_exists && caml_call1(Stdlib_Random[10], 1.) < 0.3){
     var
      x = caml_call1(Stdlib_Random[5], world.clientWidth - 30 | 0),
      y = caml_call1(Stdlib_Random[5], world.clientHeight - 30 | 0);
     add_creet(cst_lime, x, y);
    }
    var ppx_lwt_0 = caml_call1(Js_of_ocaml_lwt_Lwt_js[1], 2.);
    return caml_call3
            (Lwt[81],
             function(exn){
              try{throw caml_maybe_attach_backtrace(exn, 0);}
              catch(exn){var exn$0 = caml_wrap_exception(exn); return exn$0;}
             },
             ppx_lwt_0,
             function(param){return reproduction_loop(0);});
   }
   caml_call1(Stdlib_Random[3], 0);
   add_creet(cst_lime$0, 200, 200);
   caml_call1(Lwt[11], reproduction_loop);
   var Dune_exe_Main = [0];
   runtime.caml_register_global(60, Dune_exe_Main, "Dune__exe__Main");
   return;
  }
  (globalThis));

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLm1haW4uZW9ianMvanNvby9kdW5lX19leGVfX01haW4uY21vLmpzIiwic2VjdGlvbnMiOlt7Im9mZnNldCI6eyJsaW5lIjo5LCJjb2x1bW4iOjB9LCJtYXAiOnsidmVyc2lvbiI6MywiZmlsZSI6Ii5tYWluLmVvYmpzL2pzb28vZHVuZV9fZXhlX19NYWluLmNtby5qcyIsIm5hbWVzIjpbInJ1bnRpbWUiLCJjc3RfbGltZSIsImNzdF9weCIsImNhbWxfanNzdHJpbmdfb2Zfc3RyaW5nIiwiY2FtbF9tYXliZV9hdHRhY2hfYmFja3RyYWNlIiwiY2FtbF93cmFwX2V4Y2VwdGlvbiIsImNhbWxfY2FsbDEiLCJmIiwiYTAiLCJjYW1sX2NhbGwyIiwiYTEiLCJjYW1sX2NhbGwzIiwiYTIiLCJjYW1sX2NhbGw1IiwiYTMiLCJhNCIsImdsb2JhbF9kYXRhIiwiU3RkbGliIiwiSnNfb2Zfb2NhbWxfbHd0X0x3dF9qcyIsIkx3dCIsIlN0ZGxpYl9MaXN0IiwiU3RkbGliX1JhbmRvbSIsIkpzX29mX29jYW1sX2x3dF9Md3RfanNfZXZlbnRzIiwiSnNfb2Zfb2NhbWxfRG9tX2h0bWwiLCJKc19vZl9vY2FtbF9Eb20iLCJkb2N1bWVudCIsIndvcmxkIiwiY3JlZXRzIiwibW92ZV9jcmVldCIsInQxMyIsInN0YXRlIiwidyIsImgiLCJueCIsIm55IiwiZHgiLCJkeSIsInQxNSIsInQxNyIsInQxOCIsInQyMCIsInQyMSIsImRlbGF5IiwicHB4X2x3dF8wIiwiZXhuIiwicGFyYW0iLCJhZGRfY3JlZXQiLCJjb2xvciIsIngiLCJ5IiwidDI0IiwidDMiLCJ0NCIsInQ2IiwidDciLCJ0OSIsInQxMCIsInYiLCJvZmZzZXRfeCIsIm9mZnNldF95Iiwid29ybGRfcmVjdCIsInQyNSIsInJlY3QiLCJ0MzIiLCJ0MzMiLCJ0MzQiLCJ0MzgiLCJ0MzkiLCJ0NDEiLCJ0NDIiLCJyZXByb2R1Y3Rpb25fbG9vcCIsImhlYWx0aHlfZXhpc3RzIiwic3QiLCJEdW5lX2V4ZV9NYWluIl0sInNvdXJj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ekI7QUFBQUE7QUFBQUEsS0FBQTBCO0FBQUFBLE9BSXZCO0FBQUE7QUFBQSxrQkFBQTFCLFdBQUEyQixLQUFZLFVBQWdCLGlCQUFnQjtBQUFBO0FBQUEsSUFDakUscUJBQ0s7QUFBQTtBQUFBLE1BQUF4QixJQUNPO0FBQUEsTUFBQUMsSUFDQTtBQUFBLEtBQ1I7QUFBQTtBQUFBLFFBQUFOLFlBR1M7QUFBQSxJQUFiO0FBQUE7QUFBQSxzQkFBQUM7QUFBQUEsY0FBQTtBQUFBLG9CQUFBQSxTQUFBQSxRRHZJRiwwQkN1SUU7QUFBQSxhQUNvQjtBQUFBO0FBQUEsc0JBQUFDLE9BQXBCLDJCQUFvQjtBQUFBO0FBQUEsR0FJcEI7QUFBQSxHQUNBO0FBQUEsR0FDQTtBQUFBLE9BQUE0QixnQkFBMkI7QUFBQTtBQUFBO0FBQUEsRUQ5STdCIiwic291cmNlc0NvbnRlbnQiOlsiKCogZ2VuZXJhdGVkIGNvZGUgKikiLCJvcGVuIEpzX29mX29jYW1sXHJcbm9wZW4gSnNfb2Zfb2NhbWxfbHd0XHJcblxyXG5sZXQgZG9jdW1lbnQgPSBEb21faHRtbC5kb2N1bWVudFxyXG5sZXQgd29ybGQgPSBEb21faHRtbC5nZXRFbGVtZW50QnlJZF9leG4gXCJ3b3JsZFwiXHJcblxyXG4oKiDQodC+0YHRgtC+0Y/QvdC40LUg0YHRg9GJ0LXRgdGC0LLQsCAqKVxyXG50eXBlIGNyZWV0X3N0YXRlID0ge1xyXG4gIG11dGFibGUgeDogaW50O1xyXG4gIG11dGFibGUgeTogaW50O1xyXG4gIG11dGFibGUgZHg6IGludDtcclxuICBtdXRhYmxlIGR5OiBpbnQ7XHJcbiAgbXV0YWJsZSBpbmZlY3RlZDogYm9vbDtcclxuICBtdXRhYmxlIGlzX2JlaW5nX2RyYWdnZWQ6IGJvb2w7XHJcbn1cclxuXHJcbigqINCS0YHQtSBDcmVldCfRiyAqKVxyXG5sZXQgY3JlZXRzIDogKERvbV9odG1sLmRpdkVsZW1lbnQgSnMudCAqIGNyZWV0X3N0YXRlKSBsaXN0IHJlZiA9IHJlZiBbXVxyXG5cclxuKCog0KHQvtC30LTQsNC90LjQtSBET00t0Y3Qu9C10LzQtdC90YLQsCAqKVxyXG5sZXQgY3JlYXRlX2NyZWV0IGNvbG9yIHggeSA9XHJcbiAgbGV0IGQgPSBEb21faHRtbC5jcmVhdGVEaXYgZG9jdW1lbnQgaW5cclxuICBkIyMuY2xhc3NOYW1lIDo9IEpzLnN0cmluZyBcImNyZWV0XCI7XHJcbiAgZCMjLnN0eWxlIyMuYmFja2dyb3VuZENvbG9yIDo9IEpzLnN0cmluZyBjb2xvcjtcclxuICBkIyMuc3R5bGUjIy5sZWZ0IDo9IEpzLnN0cmluZyAoc3RyaW5nX29mX2ludCB4IF4gXCJweFwiKTtcclxuICBkIyMuc3R5bGUjIy50b3AgOj0gSnMuc3RyaW5nIChzdHJpbmdfb2ZfaW50IHkgXiBcInB4XCIpO1xyXG4gIERvbS5hcHBlbmRDaGlsZCB3b3JsZCBkO1xyXG4gIGRcclxuXHJcbigqINCQ0LLRgtC+0LzQsNGC0LjRh9C10YHQutC+0LUg0LTQstC40LbQtdC90LjQtSAqKVxyXG5sZXQgcmVjIG1vdmVfY3JlZXQgZCBzdGF0ZSA9XHJcbiAgaWYgbm90IHN0YXRlLmlzX2JlaW5nX2RyYWdnZWQgdGhlbiAoXHJcbiAgICBsZXQgdyA9IHdvcmxkIyMuY2xpZW50V2lkdGggYW5kIGggPSB3b3JsZCMjLmNsaWVudEhlaWdodCBpblxyXG4gICAgbGV0IG54ID0gc3RhdGUueCArIHN0YXRlLmR4IGFuZCBueSA9IHN0YXRlLnkgKyBzdGF0ZS5keSBpblxyXG5cclxuICAgIGxldCBkeCwgbnggPVxyXG4gICAgICBpZiBueCA8IDAgfHwgbnggPiB3IC0gMjAgdGhlbiAoLXN0YXRlLmR4LCBtYXggMCAobWluICh3IC0gMjApIG54KSlcclxuICAgICAgZWxzZSAoc3RhdGUuZHgsIG54KVxyXG4gICAgaW5cclxuICAgIGxldCBkeSwgbnkgPVxyXG4gICAgICBpZiBueSA8IDAgfHwgbnkgPiBoIC0gMjAgdGhlbiAoLXN0YXRlLmR5LCBtYXggMCAobWluIChoIC0gMjApIG55KSlcclxuICAgICAgZWxzZSAoc3RhdGUuZHksIG55KVxyXG4gICAgaW5cclxuXHJcbiAgICBzdGF0ZS5keCA8LSBkeDtcclxuICAgIHN0YXRlLmR5IDwtIGR5O1xyXG4gICAgc3RhdGUueCA8LSBueDtcclxuICAgIHN0YXRlLnkgPC0gbnk7XHJcblxyXG4gICAgKCog0JfQsNGA0LDQttC10L3QuNC1INCyINCy0LXRgNGF0L3QtdC5INC30L7QvdC1IOKAlCDRgtC+0LvRjNC60L4g0LXRgdC70Lgg0L3QtSDQv9C10YDQtdGC0LDRgdC60LjQstCw0LXRgtGB0Y8gKilcclxuICAgIGlmIHN0YXRlLnkgPCA1MCAmJiBub3Qgc3RhdGUuaW5mZWN0ZWQgJiYgbm90IHN0YXRlLmlzX2JlaW5nX2RyYWdnZWQgdGhlbiAoXHJcbiAgICAgIHN0YXRlLmluZmVjdGVkIDwtIHRydWU7XHJcbiAgICAgIGQjIy5zdHlsZSMjLmJhY2tncm91bmRDb2xvciA6PSBKcy5zdHJpbmcgXCJyZWRcIlxyXG4gICAgKTtcclxuXHJcbiAgICAoKiDQkdC+0LvRjNC90LjRhtCwINCy0L3QuNC30YMg0LHQvtC70YzRiNC1INC90LUg0LvQtdGH0LjRgiDQsNCy0YLQvtC80LDRgtC40YfQtdGB0LrQuCAqKVxyXG4gICAgZCMjLnN0eWxlIyMubGVmdCA6PSBKcy5zdHJpbmcgKHN0cmluZ19vZl9pbnQgc3RhdGUueCBeIFwicHhcIik7XHJcbiAgICBkIyMuc3R5bGUjIy50b3AgOj0gSnMuc3RyaW5nIChzdHJpbmdfb2ZfaW50IHN0YXRlLnkgXiBcInB4XCIpO1xyXG4gICk7XHJcblxyXG4gIGxldCBkZWxheSA9IGlmIHN0YXRlLmluZmVjdGVkIHRoZW4gMC4wNSBlbHNlIDAuMDMgaW5cclxuICBsZXQlbHd0ICgpID0gTHd0X2pzLnNsZWVwIGRlbGF5IGluXHJcbiAgbW92ZV9jcmVldCBkIHN0YXRlXHJcblxyXG4oKiDQn9C10YDQtdGC0LDRgdC60LjQstCw0L3QuNC1ICopXHJcbmxldCBtYWtlX2RyYWdnYWJsZSBkIHN0YXRlID1cclxuICBsZXQgb3BlbiBMd3RfanNfZXZlbnRzIGluXHJcbiAgbGV0IG9mZnNldF94ID0gcmVmIDAgYW5kIG9mZnNldF95ID0gcmVmIDAgaW5cclxuICBsZXQgd29ybGRfcmVjdCA9IHJlZiAod29ybGQjI2dldEJvdW5kaW5nQ2xpZW50UmVjdCkgaW5cclxuXHJcbiAgKCog0J3QsNC20LDRgtC40LUg0LzRi9GI0Lgg4oCUINC90LDRh9Cw0YLRjCDQv9C10YDQtdGC0LDRgdC60LjQstCw0L3QuNC1ICopXHJcbiAgTHd0LmFzeW5jIChmdW4gKCkgLT5cclxuICAgIG1vdXNlZG93bnMgZCAoZnVuIGV2IF8gLT5cclxuICAgICAgc3RhdGUuaXNfYmVpbmdfZHJhZ2dlZCA8LSB0cnVlO1xyXG4gICAgICB3b3JsZF9yZWN0IDo9IHdvcmxkIyNnZXRCb3VuZGluZ0NsaWVudFJlY3Q7XHJcbiAgICAgIGxldCByZWN0ID0gZCMjZ2V0Qm91bmRpbmdDbGllbnRSZWN0IGluXHJcbiAgICAgIG9mZnNldF94IDo9IGludF9vZl9mbG9hdCAoZmxvYXRfb2ZfaW50IGV2IyMuY2xpZW50WCAtLiByZWN0IyMubGVmdCk7XHJcbiAgICAgIG9mZnNldF95IDo9IGludF9vZl9mbG9hdCAoZmxvYXRfb2ZfaW50IGV2IyMuY2xpZW50WSAtLiByZWN0IyMudG9wKTtcclxuICAgICAgKCog0JLQviDQstGA0LXQvNGPINC/0LXRgNC10YLQsNGB0LrQuNCy0LDQvdC40Y8gQ3JlZXQg0L3QtdCy0L7RgdC/0YDQuNC40LzRh9C40LIg0Log0LfQsNGA0LDQttC10L3QuNGOICopXHJcbiAgICAgIEx3dC5yZXR1cm5fdW5pdClcclxuICApO1xyXG5cclxuICAoKiDQntGC0L/Rg9GB0LrQsNC90LjQtSDQvNGL0YjQuCDigJQg0LfQsNC60L7QvdGH0LjRgtGMINC/0LXRgNC10YLQsNGB0LrQuNCy0LDQvdC40LUg0Lgg0LLQvtC30LzQvtC20L3QviDQstGL0LvQtdGH0LjRgtGMICopXHJcbiAgTHd0LmFzeW5jIChmdW4gKCkgLT5cclxuICAgIG1vdXNldXBzIGRvY3VtZW50IChmdW4gXyBfIC0+XHJcbiAgICAgIGxldCBoID0gd29ybGQjIy5jbGllbnRIZWlnaHQgaW5cclxuICAgICAgaWYgc3RhdGUuaXNfYmVpbmdfZHJhZ2dlZCAmJiBzdGF0ZS5pbmZlY3RlZCAmJiBzdGF0ZS55ID4gaCAtIDcwIHRoZW4gKFxyXG4gICAgICAgIHN0YXRlLmluZmVjdGVkIDwtIGZhbHNlO1xyXG4gICAgICAgIGQjIy5zdHlsZSMjLmJhY2tncm91bmRDb2xvciA6PSBKcy5zdHJpbmcgXCJsaW1lXCJcclxuICAgICAgKTtcclxuICAgICAgc3RhdGUuaXNfYmVpbmdfZHJhZ2dlZCA8LSBmYWxzZTtcclxuICAgICAgTHd0LnJldHVybl91bml0KVxyXG4gICk7XHJcblxyXG4gICgqINCU0LLQuNC20LXQvdC40LUg0LzRi9GI0Lgg4oCUINC+0LHQvdC+0LLQu9GP0LXQvCDQv9C+0LfQuNGG0LjRjiAqKVxyXG4gIEx3dC5hc3luYyAoZnVuICgpIC0+XHJcbiAgICBtb3VzZW1vdmVzIGRvY3VtZW50IChmdW4gZXYgXyAtPlxyXG4gICAgICBpZiBzdGF0ZS5pc19iZWluZ19kcmFnZ2VkIHRoZW4gKFxyXG4gICAgICAgIGxldCB3ciA9ICF3b3JsZF9yZWN0IGluXHJcbiAgICAgICAgbGV0IG54ID0gaW50X29mX2Zsb2F0IChmbG9hdF9vZl9pbnQgZXYjIy5jbGllbnRYIC0uIHdyIyMubGVmdCkgLSAhb2Zmc2V0X3ggaW5cclxuICAgICAgICBsZXQgbnkgPSBpbnRfb2ZfZmxvYXQgKGZsb2F0X29mX2ludCBldiMjLmNsaWVudFkgLS4gd3IjIy50b3ApIC0gIW9mZnNldF95IGluXHJcbiAgICAgICAgc3RhdGUueCA8LSBueDtcclxuICAgICAgICBzdGF0ZS55IDwtIG55O1xyXG4gICAgICAgIGQjIy5zdHlsZSMjLmxlZnQgOj0gSnMuc3RyaW5nIChzdHJpbmdfb2ZfaW50IG54IF4gXCJweFwiKTtcclxuICAgICAgICBkIyMuc3R5bGUjIy50b3AgOj0gSnMuc3RyaW5nIChzdHJpbmdfb2ZfaW50IG55IF4gXCJweFwiKTtcclxuICAgICAgKTtcclxuICAgICAgTHd0LnJldHVybl91bml0KVxyXG4gICk7XHJcblxyXG4gIEx3dC5yZXR1cm5fdW5pdFxyXG5cclxuKCog0JTQvtCx0LDQstC70LXQvdC40LUg0L3QvtCy0L7Qs9C+IENyZWV0ICopXHJcbmxldCBhZGRfY3JlZXQgY29sb3IgeCB5ID1cclxuICBsZXQgZCA9IGNyZWF0ZV9jcmVldCBjb2xvciB4IHkgaW5cclxuICBsZXQgc3RhdGUgPSB7XHJcbiAgICB4OyB5O1xyXG4gICAgZHggPSAobGV0IHYgPSAoUmFuZG9tLmludCA1KSAtIDIgaW4gaWYgdiA9IDAgdGhlbiAxIGVsc2Ugdik7XHJcbiAgICBkeSA9IChsZXQgdiA9IChSYW5kb20uaW50IDUpIC0gMiBpbiBpZiB2ID0gMCB0aGVuIDEgZWxzZSB2KTtcclxuICAgIGluZmVjdGVkID0gZmFsc2U7XHJcbiAgICBpc19iZWluZ19kcmFnZ2VkID0gZmFsc2U7XHJcbiAgfSBpblxyXG4gIGNyZWV0cyA6PSAoZCwgc3RhdGUpIDo6ICFjcmVldHM7XHJcbiAgTHd0LmFzeW5jIChmdW4gKCkgLT4gbW92ZV9jcmVldCBkIHN0YXRlKTtcclxuICBMd3QuYXN5bmMgKGZ1biAoKSAtPiBtYWtlX2RyYWdnYWJsZSBkIHN0YXRlKVxyXG5cclxuKCog0KDQsNC30LzQvdC+0LbQtdC90LjQtSAqKVxyXG5sZXQgcmVjIHJlcHJvZHVjdGlvbl9sb29wICgpID1cclxuICBsZXQgaGVhbHRoeV9leGlzdHMgPSBMaXN0LmV4aXN0cyAoZnVuIChfLCBzdCkgLT4gbm90IHN0LmluZmVjdGVkKSAhY3JlZXRzIGluXHJcbiAgaWYgaGVhbHRoeV9leGlzdHMgdGhlbiAoXHJcbiAgICBpZiBSYW5kb20uZmxvYXQgMS4wIDwgMC4zIHRoZW4gKFxyXG4gICAgICBsZXQgeCA9IFJhbmRvbS5pbnQgKHdvcmxkIyMuY2xpZW50V2lkdGggLSAzMCkgaW5cclxuICAgICAgbGV0IHkgPSBSYW5kb20uaW50ICh3b3JsZCMjLmNsaWVudEhlaWdodCAtIDMwKSBpblxyXG4gICAgICBhZGRfY3JlZXQgXCJsaW1lXCIgeCB5O1xyXG4gICAgKVxyXG4gICk7XHJcbiAgbGV0JWx3dCAoKSA9IEx3dF9qcy5zbGVlcCAyLjAgaW5cclxuICByZXByb2R1Y3Rpb25fbG9vcCAoKVxyXG5cclxuKCogbWFpbiAqKVxyXG5sZXQgKCkgPVxyXG4gIFJhbmRvbS5zZWxmX2luaXQgKCk7XHJcbiAgYWRkX2NyZWV0IFwibGltZVwiIDIwMCAyMDA7XHJcbiAgTHd0LmFzeW5jIHJlcHJvZHVjdGlvbl9sb29wXHJcbiJdLCJpZ25vcmVMaXN0IjpbMF19fV19
