// Generated by js_of_ocaml
//# buildInfo:effects=false, kind=cmo, use-js-string=true, version=5.9.1

//# unitInfo: Provides: Dune__exe__Main
//# unitInfo: Requires: Js_of_ocaml__Dom, Js_of_ocaml__Dom_html, Js_of_ocaml__Js, Js_of_ocaml_lwt__Lwt_js, Js_of_ocaml_lwt__Lwt_js_events, Lwt, Stdlib, Stdlib__List, Stdlib__Random
(function
  (globalThis){
   "use strict";
   var
    runtime = globalThis.jsoo_runtime,
    cst_lime$0 = "lime",
    cst_px$5 = "px",
    caml_jsstring_of_string = runtime.caml_jsstring_of_string,
    caml_maybe_attach_backtrace = runtime.caml_maybe_attach_backtrace,
    caml_wrap_exception = runtime.caml_wrap_exception;
   function caml_call1(f, a0){
    return (f.l >= 0 ? f.l : f.l = f.length) === 1
            ? f(a0)
            : runtime.caml_call_gen(f, [a0]);
   }
   function caml_call2(f, a0, a1){
    return (f.l >= 0 ? f.l : f.l = f.length) === 2
            ? f(a0, a1)
            : runtime.caml_call_gen(f, [a0, a1]);
   }
   function caml_call3(f, a0, a1, a2){
    return (f.l >= 0 ? f.l : f.l = f.length) === 3
            ? f(a0, a1, a2)
            : runtime.caml_call_gen(f, [a0, a1, a2]);
   }
   function caml_call5(f, a0, a1, a2, a3, a4){
    return (f.l >= 0 ? f.l : f.l = f.length) === 5
            ? f(a0, a1, a2, a3, a4)
            : runtime.caml_call_gen(f, [a0, a1, a2, a3, a4]);
   }
   var
    global_data = runtime.caml_get_global_data(),
    Stdlib = global_data.Stdlib,
    Js_of_ocaml_lwt_Lwt_js = global_data.Js_of_ocaml_lwt__Lwt_js,
    Lwt = global_data.Lwt,
    Stdlib_List = global_data.Stdlib__List,
    Stdlib_Random = global_data.Stdlib__Random,
    Js_of_ocaml_lwt_Lwt_js_events = global_data.Js_of_ocaml_lwt__Lwt_js_events,
    Js_of_ocaml_Dom_html = global_data.Js_of_ocaml__Dom_html,
    Js_of_ocaml_Dom = global_data.Js_of_ocaml__Dom,
    document = Js_of_ocaml_Dom_html[2],
    world = caml_call1(Js_of_ocaml_Dom_html[4], "world"),
    creets = [0, 0],
    cst_px = cst_px$5,
    cst_px$0 = cst_px$5,
    cst_px$1 = cst_px$5,
    cst_px$2 = cst_px$5,
    cst_px$3 = cst_px$5,
    cst_px$4 = cst_px$5,
    cst_lime = cst_lime$0;
   function move_creet(t13, state){
    if(1 - state[6]){
     var
      w = world.clientWidth,
      h = world.clientHeight,
      nx = state[1] + state[3] | 0,
      ny = state[2] + state[4] | 0;
     a:
     {
      if(0 <= nx && (w - 20 | 0) >= nx){
       var nx$0 = nx, dx = state[3];
       break a;
      }
      var
       _j_ = caml_call2(Stdlib[16], w - 20 | 0, nx),
       _k_ = caml_call2(Stdlib[17], 0, _j_),
       nx$0 = _k_,
       dx = - state[3] | 0;
     }
     a:
     {
      if(0 <= ny && (h - 20 | 0) >= ny){
       var ny$0 = ny, dy = state[4];
       break a;
      }
      var
       _l_ = caml_call2(Stdlib[16], h - 20 | 0, ny),
       _m_ = caml_call2(Stdlib[17], 0, _l_),
       ny$0 = _m_,
       dy = - state[4] | 0;
     }
     state[3] = dx;
     state[4] = dy;
     state[1] = nx$0;
     state[2] = ny$0;
     var _n_ = state[2] < 50 ? 1 : 0, _o_ = _n_ ? 1 - state[5] : _n_;
     if(_o_){state[5] = 1; var t15 = t13.style; t15.backgroundColor = "red";}
     var _p_ = state[5], _q_ = _p_ ? (h - 70 | 0) < state[2] ? 1 : 0 : _p_;
     if(_q_){
      state[5] = 0;
      var t18 = t13.style;
      t18.backgroundColor = cst_lime$0;
     }
     var
      _r_ = caml_call1(Stdlib[33], state[1]),
      t20 = caml_jsstring_of_string(caml_call2(Stdlib[28], _r_, cst_px$1)),
      t21 = t13.style;
     t21.left = t20;
     var
      _s_ = caml_call1(Stdlib[33], state[2]),
      t23 = caml_jsstring_of_string(caml_call2(Stdlib[28], _s_, cst_px$2)),
      t24 = t13.style;
     t24.top = t23;
    }
    var
     delay = state[5] ? 0.05 : 0.03,
     ppx_lwt_0 = caml_call1(Js_of_ocaml_lwt_Lwt_js[1], delay);
    return caml_call3
            (Lwt[81],
             function(exn){
              try{throw caml_maybe_attach_backtrace(exn, 0);}
              catch(exn){var exn$0 = caml_wrap_exception(exn); return exn$0;}
             },
             ppx_lwt_0,
             function(param){return move_creet(t13, state);});
   }
   function add_creet(color, x, y){
    var t27 = caml_call1(Js_of_ocaml_Dom_html[51], document);
    t27.className = "creet";
    var t3 = caml_jsstring_of_string(color), t4 = t27.style;
    t4.backgroundColor = t3;
    var
     _a_ = caml_call1(Stdlib[33], x),
     t6 = caml_jsstring_of_string(caml_call2(Stdlib[28], _a_, cst_px)),
     t7 = t27.style;
    t7.left = t6;
    var
     _b_ = caml_call1(Stdlib[33], y),
     t9 = caml_jsstring_of_string(caml_call2(Stdlib[28], _b_, cst_px$0)),
     t10 = t27.style;
    t10.top = t9;
    caml_call2(Js_of_ocaml_Dom[5], world, t27);
    var
     v = caml_call1(Stdlib_Random[5], 5) - 2 | 0,
     _c_ = 0,
     _d_ = 0,
     _e_ = 0 === v ? 1 : v,
     v$0 = caml_call1(Stdlib_Random[5], 5) - 2 | 0,
     _f_ = 0 === v$0 ? 1 : v$0,
     state = [0, x, y, _f_, _e_, _d_, _c_];
    creets[1] = [0, [0, t27, state], creets[1]];
    caml_call1(Lwt[11], function(param){return move_creet(t27, state);});
    return caml_call1
            (Lwt[11],
             function(param){
              var
               offset_x = [0, 0],
               offset_y = [0, 0],
               world_rect = [0, world.getBoundingClientRect()];
              caml_call1
               (Lwt[11],
                function(param){
                 return caml_call5
                         (Js_of_ocaml_lwt_Lwt_js_events[82],
                          0,
                          0,
                          0,
                          t27,
                          function(t28, param){
                           state[6] = 1;
                           world_rect[1] = world.getBoundingClientRect();
                           var rect = t27.getBoundingClientRect();
                           offset_x[1] = t28.clientX - rect.left | 0;
                           offset_y[1] = t28.clientY - rect.top | 0;
                           return Lwt[36];
                          });
                });
              caml_call1
               (Lwt[11],
                function(param){
                 return caml_call5
                         (Js_of_ocaml_lwt_Lwt_js_events[83],
                          0,
                          0,
                          0,
                          document,
                          function(param, _i_){state[6] = 0; return Lwt[36];});
                });
              caml_call1
               (Lwt[11],
                function(param){
                 return caml_call5
                         (Js_of_ocaml_lwt_Lwt_js_events[85],
                          0,
                          0,
                          0,
                          document,
                          function(t32, param){
                           if(state[6]){
                            var
                             t33 = world_rect[1],
                             nx = (t32.clientX - t33.left | 0) - offset_x[1] | 0,
                             ny = (t32.clientY - t33.top | 0) - offset_y[1] | 0;
                            state[1] = nx;
                            state[2] = ny;
                            var
                             _g_ = caml_call1(Stdlib[33], nx),
                             t37 =
                               caml_jsstring_of_string
                                (caml_call2(Stdlib[28], _g_, cst_px$3)),
                             t38 = t27.style;
                            t38.left = t37;
                            var
                             _h_ = caml_call1(Stdlib[33], ny),
                             t40 =
                               caml_jsstring_of_string
                                (caml_call2(Stdlib[28], _h_, cst_px$4)),
                             t41 = t27.style;
                            t41.top = t40;
                           }
                           return Lwt[36];
                          });
                });
              return Lwt[36];
             });
   }
   function reproduction_loop(param){
    var
     healthy_exists =
       caml_call2
        (Stdlib_List[33],
         function(param){var st = param[2]; return 1 - st[5];},
         creets[1]);
    if(healthy_exists && caml_call1(Stdlib_Random[10], 1.) < 0.3){
     var
      x = caml_call1(Stdlib_Random[5], world.clientWidth - 30 | 0),
      y = caml_call1(Stdlib_Random[5], world.clientHeight - 30 | 0);
     add_creet(cst_lime, x, y);
    }
    var ppx_lwt_0 = caml_call1(Js_of_ocaml_lwt_Lwt_js[1], 2.);
    return caml_call3
            (Lwt[81],
             function(exn){
              try{throw caml_maybe_attach_backtrace(exn, 0);}
              catch(exn){var exn$0 = caml_wrap_exception(exn); return exn$0;}
             },
             ppx_lwt_0,
             function(param){return reproduction_loop(0);});
   }
   caml_call1(Stdlib_Random[3], 0);
   add_creet(cst_lime$0, 200, 200);
   caml_call1(Lwt[11], reproduction_loop);
   var Dune_exe_Main = [0];
   runtime.caml_register_global(59, Dune_exe_Main, "Dune__exe__Main");
   return;
  }
  (globalThis));

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLm1haW4uZW9ianMvanNvby9kdW5lX19leGVfX01haW4uY21vLmpzIiwic2VjdGlvbnMiOlt7Im9mZnNldCI6eyJsaW5lIjo5LCJjb2x1bW4iOjB9LCJtYXAiOnsidmVyc2lvbiI6MywiZmlsZSI6Ii5tYWluLmVvYmpzL2pzb28vZHVuZV9fZXhlX19NYWluLmNtby5qcyIsIm5hbWVzIjpbInJ1bnRpbWUiLCJjc3RfbGltZSIsImNzdF9weCIsImNhbWxfanNzdHJpbmdfb2Zfc3RyaW5nIiwiY2FtbF9tYXliZV9hdHRhY2hfYmFja3RyYWNlIiwiY2FtbF93cmFwX2V4Y2VwdGlvbiIsImNhbWxfY2FsbDEiLCJmIiwiYTAiLCJjYW1sX2NhbGwyIiwiYTEiLCJjYW1sX2NhbGwzIiwiYTIiLCJjYW1sX2NhbGw1IiwiYTMiLCJhNCIsImdsb2JhbF9kYXRhIiwiU3RkbGliIiwiSnNfb2Zfb2NhbWxfbHd0X0x3dF9qcyIsIkx3dCIsIlN0ZGxpYl9MaXN0IiwiU3RkbGliX1JhbmRvbSIsIkpzX29mX29jYW1sX2x3dF9Md3RfanNfZXZlbnRzIiwiSnNfb2Zfb2NhbWxfRG9tX2h0bWwiLCJKc19vZl9vY2FtbF9Eb20iLCJkb2N1bWVudCIsIndvcmxkIiwiY3JlZXRzIiwibW92ZV9jcmVldCIsInQxMyIsInN0YXRlIiwidyIsImgiLCJueCIsIm55IiwiZHgiLCJkeSIsInQxNSIsInQxOCIsInQyMCIsInQyMSIsInQyMyIsInQyNCIsImRlbGF5IiwicHB4X2x3dF8wIiwiZXhuIiwicGFyYW0iLCJhZGRfY3JlZXQiLCJjb2xvciIsIngiLCJ5IiwidDI3IiwidDMiLCJ0NCIsInQ2IiwidDciLCJ0OSIsInQxMCIsInYiLCJvZmZzZXRfeCIsIm9mZnNldF95Iiwid29ybGRfcmVjdCIsInQyOCIsInJlY3QiLCJ0MzIiLCJ0MzMiLCJ0MzciLCJ0MzgiLCJ0NDAiLCJ0NDEiLCJyZXByb2R1Y3Rpb25fbG9vcCIsImhlYWx0aHlfZXhpc3RzIiwic3QiLCJEdW5lX2V4ZV9NYWluIl0sInNvdXJj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Q2pFLHFCQUNLO0FBQUE7QUFBQSxNQUFBdkIsSUFDTztBQUFBLE1BQUFDLElBQ0E7QUFBQSxLQUNSO0FBQUE7QUFBQSxRQUFBTixZQUdTO0FBQUEsSUFBYjtBQUFBO0FBQUEsc0JBQUFDO0FBQUFBLGNBQUE7QUFBQSxvQkFBQUEsU0FBQUEsUUR6SUYsMEJDeUlFO0FBQUEsYUFDb0I7QUFBQTtBQUFBLHNCQUFBQyxPQUFwQiwyQkFBb0I7QUFBQTtBQUFBLEdBSXBCO0FBQUEsR0FDQTtBQUFBLEdBQ0E7QUFBQSxPQUFBMkIsZ0JBQTJCO0FBQUE7QUFBQTtBQUFBLEVEaEo3QiIsInNvdXJjZXNDb250ZW50IjpbIigqIGdlbmVyYXRlZCBjb2RlICopIiwib3BlbiBKc19vZl9vY2FtbFxyXG5vcGVuIEpzX29mX29jYW1sX2x3dFxyXG5cclxubGV0IGRvY3VtZW50ID0gRG9tX2h0bWwuZG9jdW1lbnRcclxubGV0IHdvcmxkID0gRG9tX2h0bWwuZ2V0RWxlbWVudEJ5SWRfZXhuIFwid29ybGRcIlxyXG5cclxuKCog0KHQv9C40YHQvtC6INCy0YHQtdGFINGB0YPRidC10YHRgtCyICopXHJcbnR5cGUgY3JlZXRfc3RhdGUgPSB7XHJcbiAgbXV0YWJsZSB4OiBpbnQ7XHJcbiAgbXV0YWJsZSB5OiBpbnQ7XHJcbiAgbXV0YWJsZSBkeDogaW50O1xyXG4gIG11dGFibGUgZHk6IGludDtcclxuICBtdXRhYmxlIGluZmVjdGVkOiBib29sO1xyXG4gIG11dGFibGUgaXNfYmVpbmdfZHJhZ2dlZDogYm9vbDtcclxufVxyXG5cclxuKCog0JLRgdC1IENyZWV0J9GLICopXHJcbmxldCBjcmVldHMgOiAoRG9tX2h0bWwuZGl2RWxlbWVudCBKcy50ICogY3JlZXRfc3RhdGUpIGxpc3QgcmVmID0gcmVmIFtdXHJcblxyXG4oKiDQodC+0LfQtNCw0L3QuNC1IERPTS3RjdC70LXQvNC10L3RgtCwICopXHJcbmxldCBjcmVhdGVfY3JlZXQgY29sb3IgeCB5ID1cclxuICBsZXQgZCA9IERvbV9odG1sLmNyZWF0ZURpdiBkb2N1bWVudCBpblxyXG4gIGQjIy5jbGFzc05hbWUgOj0gSnMuc3RyaW5nIFwiY3JlZXRcIjtcclxuICBkIyMuc3R5bGUjIy5iYWNrZ3JvdW5kQ29sb3IgOj0gSnMuc3RyaW5nIGNvbG9yO1xyXG4gIGQjIy5zdHlsZSMjLmxlZnQgOj0gSnMuc3RyaW5nIChzdHJpbmdfb2ZfaW50IHggXiBcInB4XCIpO1xyXG4gIGQjIy5zdHlsZSMjLnRvcCA6PSBKcy5zdHJpbmcgKHN0cmluZ19vZl9pbnQgeSBeIFwicHhcIik7XHJcbiAgRG9tLmFwcGVuZENoaWxkIHdvcmxkIGQ7XHJcbiAgZFxyXG5cclxuKCog0JDQstGC0L7QvNCw0YLQuNGH0LXRgdC60L7QtSDQtNCy0LjQttC10L3QuNC1ICopXHJcbmxldCByZWMgbW92ZV9jcmVldCBkIHN0YXRlID1cclxuICBpZiBub3Qgc3RhdGUuaXNfYmVpbmdfZHJhZ2dlZCB0aGVuIChcclxuICAgIGxldCB3ID0gd29ybGQjIy5jbGllbnRXaWR0aCBhbmQgaCA9IHdvcmxkIyMuY2xpZW50SGVpZ2h0IGluXHJcbiAgICBsZXQgbnggPSBzdGF0ZS54ICsgc3RhdGUuZHggYW5kIG55ID0gc3RhdGUueSArIHN0YXRlLmR5IGluXHJcblxyXG4gICAgbGV0IGR4LCBueCA9XHJcbiAgICAgIGlmIG54IDwgMCB8fCBueCA+IHcgLSAyMCB0aGVuICgtc3RhdGUuZHgsIG1heCAwIChtaW4gKHcgLSAyMCkgbngpKVxyXG4gICAgICBlbHNlIChzdGF0ZS5keCwgbngpXHJcbiAgICBpblxyXG4gICAgbGV0IGR5LCBueSA9XHJcbiAgICAgIGlmIG55IDwgMCB8fCBueSA+IGggLSAyMCB0aGVuICgtc3RhdGUuZHksIG1heCAwIChtaW4gKGggLSAyMCkgbnkpKVxyXG4gICAgICBlbHNlIChzdGF0ZS5keSwgbnkpXHJcbiAgICBpblxyXG5cclxuICAgIHN0YXRlLmR4IDwtIGR4O1xyXG4gICAgc3RhdGUuZHkgPC0gZHk7XHJcbiAgICBzdGF0ZS54IDwtIG54O1xyXG4gICAgc3RhdGUueSA8LSBueTtcclxuXHJcbiAgICAoKiDQl9Cw0YDQsNC20LXQvdC40LUg0LIg0LLQtdGA0YXQvdC10Lkg0LfQvtC90LUgKilcclxuICAgIGlmIHN0YXRlLnkgPCA1MCAmJiBub3Qgc3RhdGUuaW5mZWN0ZWQgdGhlbiAoXHJcbiAgICAgIHN0YXRlLmluZmVjdGVkIDwtIHRydWU7XHJcbiAgICAgIGQjIy5zdHlsZSMjLmJhY2tncm91bmRDb2xvciA6PSBKcy5zdHJpbmcgXCJyZWRcIlxyXG4gICAgKTtcclxuXHJcbiAgICAoKiDQm9C10YfQtdC90LjQtSDQsiDQvdC40LbQvdC10Lkg0LfQvtC90LUgKilcclxuICAgIGlmIHN0YXRlLmluZmVjdGVkICYmIHN0YXRlLnkgPiBoIC0gNzAgdGhlbiAoXHJcbiAgICAgIHN0YXRlLmluZmVjdGVkIDwtIGZhbHNlO1xyXG4gICAgICBkIyMuc3R5bGUjIy5iYWNrZ3JvdW5kQ29sb3IgOj0gSnMuc3RyaW5nIFwibGltZVwiXHJcbiAgICApO1xyXG5cclxuICAgIGQjIy5zdHlsZSMjLmxlZnQgOj0gSnMuc3RyaW5nIChzdHJpbmdfb2ZfaW50IHN0YXRlLnggXiBcInB4XCIpO1xyXG4gICAgZCMjLnN0eWxlIyMudG9wIDo9IEpzLnN0cmluZyAoc3RyaW5nX29mX2ludCBzdGF0ZS55IF4gXCJweFwiKTtcclxuICApO1xyXG5cclxuICBsZXQgZGVsYXkgPSBpZiBzdGF0ZS5pbmZlY3RlZCB0aGVuIDAuMDUgZWxzZSAwLjAzIGluXHJcbiAgbGV0JWx3dCAoKSA9IEx3dF9qcy5zbGVlcCBkZWxheSBpblxyXG4gIG1vdmVfY3JlZXQgZCBzdGF0ZVxyXG5cclxuKCog0J/QtdGA0LXRgtCw0YHQutC40LLQsNC90LjQtSAqKVxyXG5sZXQgbWFrZV9kcmFnZ2FibGUgZCBzdGF0ZSA9XHJcbiAgbGV0IG9wZW4gTHd0X2pzX2V2ZW50cyBpblxyXG4gIGxldCBvZmZzZXRfeCA9IHJlZiAwIGFuZCBvZmZzZXRfeSA9IHJlZiAwIGluXHJcbiAgbGV0IHdvcmxkX3JlY3QgPSByZWYgKHdvcmxkIyNnZXRCb3VuZGluZ0NsaWVudFJlY3QpIGluXHJcblxyXG4gIEx3dC5hc3luYyAoZnVuICgpIC0+XHJcbiAgICBtb3VzZWRvd25zIGQgKGZ1biBldiBfIC0+XHJcbiAgICAgIHN0YXRlLmlzX2JlaW5nX2RyYWdnZWQgPC0gdHJ1ZTtcclxuICAgICAgd29ybGRfcmVjdCA6PSB3b3JsZCMjZ2V0Qm91bmRpbmdDbGllbnRSZWN0O1xyXG4gICAgICBsZXQgcmVjdCA9IGQjI2dldEJvdW5kaW5nQ2xpZW50UmVjdCBpblxyXG4gICAgICBvZmZzZXRfeCA6PSBpbnRfb2ZfZmxvYXQgKGZsb2F0X29mX2ludCBldiMjLmNsaWVudFggLS4gcmVjdCMjLmxlZnQpO1xyXG4gICAgICBvZmZzZXRfeSA6PSBpbnRfb2ZfZmxvYXQgKGZsb2F0X29mX2ludCBldiMjLmNsaWVudFkgLS4gcmVjdCMjLnRvcCk7XHJcbiAgICAgIEx3dC5yZXR1cm5fdW5pdClcclxuICApO1xyXG5cclxuICBMd3QuYXN5bmMgKGZ1biAoKSAtPlxyXG4gICAgbW91c2V1cHMgZG9jdW1lbnQgKGZ1biBfIF8gLT5cclxuICAgICAgc3RhdGUuaXNfYmVpbmdfZHJhZ2dlZCA8LSBmYWxzZTtcclxuICAgICAgTHd0LnJldHVybl91bml0KVxyXG4gICk7XHJcblxyXG4gIEx3dC5hc3luYyAoZnVuICgpIC0+XHJcbiAgICBtb3VzZW1vdmVzIGRvY3VtZW50IChmdW4gZXYgXyAtPlxyXG4gICAgICBpZiBzdGF0ZS5pc19iZWluZ19kcmFnZ2VkIHRoZW4gKFxyXG4gICAgICAgIGxldCB3ciA9ICF3b3JsZF9yZWN0IGluXHJcbiAgICAgICAgbGV0IG54ID0gaW50X29mX2Zsb2F0IChmbG9hdF9vZl9pbnQgZXYjIy5jbGllbnRYIC0uIHdyIyMubGVmdCkgLSAhb2Zmc2V0X3ggaW5cclxuICAgICAgICBsZXQgbnkgPSBpbnRfb2ZfZmxvYXQgKGZsb2F0X29mX2ludCBldiMjLmNsaWVudFkgLS4gd3IjIy50b3ApIC0gIW9mZnNldF95IGluXHJcbiAgICAgICAgc3RhdGUueCA8LSBueDtcclxuICAgICAgICBzdGF0ZS55IDwtIG55O1xyXG4gICAgICAgIGQjIy5zdHlsZSMjLmxlZnQgOj0gSnMuc3RyaW5nIChzdHJpbmdfb2ZfaW50IG54IF4gXCJweFwiKTtcclxuICAgICAgICBkIyMuc3R5bGUjIy50b3AgOj0gSnMuc3RyaW5nIChzdHJpbmdfb2ZfaW50IG55IF4gXCJweFwiKTtcclxuICAgICAgKTtcclxuICAgICAgTHd0LnJldHVybl91bml0KVxyXG4gICk7XHJcblxyXG4gIEx3dC5yZXR1cm5fdW5pdFxyXG5cclxuKCog0JTQvtCx0LDQstC70LXQvdC40LUg0L3QvtCy0L7Qs9C+IENyZWV0ICopXHJcbmxldCBhZGRfY3JlZXQgY29sb3IgeCB5ID1cclxuICBsZXQgZCA9IGNyZWF0ZV9jcmVldCBjb2xvciB4IHkgaW5cclxuICBsZXQgc3RhdGUgPSB7XHJcbiAgICB4OyB5O1xyXG4gICAgZHggPSAoXHJcbiAgICAgIGxldCB2ID0gKFJhbmRvbS5pbnQgNSkgLSAyIGluXHJcbiAgICAgIGlmIHYgPSAwIHRoZW4gMSBlbHNlIHZcclxuICAgICk7XHJcbiAgICBkeSA9IChcclxuICAgICAgbGV0IHYgPSAoUmFuZG9tLmludCA1KSAtIDIgaW5cclxuICAgICAgaWYgdiA9IDAgdGhlbiAxIGVsc2UgdlxyXG4gICAgKTtcclxuICAgIGluZmVjdGVkID0gZmFsc2U7XHJcbiAgICBpc19iZWluZ19kcmFnZ2VkID0gZmFsc2U7XHJcbiAgfSBpblxyXG4gIGNyZWV0cyA6PSAoZCwgc3RhdGUpIDo6ICFjcmVldHM7XHJcbiAgTHd0LmFzeW5jIChmdW4gKCkgLT4gbW92ZV9jcmVldCBkIHN0YXRlKTtcclxuICBMd3QuYXN5bmMgKGZ1biAoKSAtPiBtYWtlX2RyYWdnYWJsZSBkIHN0YXRlKVxyXG5cclxuKCog0KDQsNC30LzQvdC+0LbQtdC90LjQtSAqKVxyXG5sZXQgcmVjIHJlcHJvZHVjdGlvbl9sb29wICgpID1cclxuICBsZXQgaGVhbHRoeV9leGlzdHMgPSBMaXN0LmV4aXN0cyAoZnVuIChfLCBzdCkgLT4gbm90IHN0LmluZmVjdGVkKSAhY3JlZXRzIGluXHJcbiAgaWYgaGVhbHRoeV9leGlzdHMgdGhlbiAoXHJcbiAgICBpZiBSYW5kb20uZmxvYXQgMS4wIDwgMC4zIHRoZW4gKFxyXG4gICAgICBsZXQgeCA9IFJhbmRvbS5pbnQgKHdvcmxkIyMuY2xpZW50V2lkdGggLSAzMCkgaW5cclxuICAgICAgbGV0IHkgPSBSYW5kb20uaW50ICh3b3JsZCMjLmNsaWVudEhlaWdodCAtIDMwKSBpblxyXG4gICAgICBhZGRfY3JlZXQgXCJsaW1lXCIgeCB5O1xyXG4gICAgKVxyXG4gICk7XHJcbiAgbGV0JWx3dCAoKSA9IEx3dF9qcy5zbGVlcCAyLjAgaW5cclxuICByZXByb2R1Y3Rpb25fbG9vcCAoKVxyXG5cclxuKCogbWFpbiAqKVxyXG5sZXQgKCkgPVxyXG4gIFJhbmRvbS5zZWxmX2luaXQgKCk7XHJcbiAgYWRkX2NyZWV0IFwibGltZVwiIDIwMCAyMDA7XHJcbiAgTHd0LmFzeW5jIHJlcHJvZHVjdGlvbl9sb29wXHJcbiJdLCJpZ25vcmVMaXN0IjpbMF19fV19
