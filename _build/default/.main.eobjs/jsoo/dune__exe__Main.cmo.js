// Generated by js_of_ocaml
//# buildInfo:effects=false, kind=cmo, use-js-string=true, version=5.9.1

//# unitInfo: Provides: Dune__exe__Main
//# unitInfo: Requires: Js_of_ocaml__Dom, Js_of_ocaml__Dom_html, Js_of_ocaml__Js, Js_of_ocaml_lwt__Lwt_js, Js_of_ocaml_lwt__Lwt_js_events, Lwt, Stdlib, Stdlib__List, Stdlib__Random
(function
  (globalThis){
   "use strict";
   var
    runtime = globalThis.jsoo_runtime,
    cst_lime$1 = "lime",
    cst_px$5 = "px",
    caml_jsstring_of_string = runtime.caml_jsstring_of_string,
    caml_maybe_attach_backtrace = runtime.caml_maybe_attach_backtrace,
    caml_wrap_exception = runtime.caml_wrap_exception;
   function caml_call1(f, a0){
    return (f.l >= 0 ? f.l : f.l = f.length) === 1
            ? f(a0)
            : runtime.caml_call_gen(f, [a0]);
   }
   function caml_call2(f, a0, a1){
    return (f.l >= 0 ? f.l : f.l = f.length) === 2
            ? f(a0, a1)
            : runtime.caml_call_gen(f, [a0, a1]);
   }
   function caml_call3(f, a0, a1, a2){
    return (f.l >= 0 ? f.l : f.l = f.length) === 3
            ? f(a0, a1, a2)
            : runtime.caml_call_gen(f, [a0, a1, a2]);
   }
   function caml_call5(f, a0, a1, a2, a3, a4){
    return (f.l >= 0 ? f.l : f.l = f.length) === 5
            ? f(a0, a1, a2, a3, a4)
            : runtime.caml_call_gen(f, [a0, a1, a2, a3, a4]);
   }
   var
    global_data = runtime.caml_get_global_data(),
    Stdlib = global_data.Stdlib,
    Js_of_ocaml_lwt_Lwt_js = global_data.Js_of_ocaml_lwt__Lwt_js,
    Lwt = global_data.Lwt,
    Stdlib_List = global_data.Stdlib__List,
    Stdlib_Random = global_data.Stdlib__Random,
    Js_of_ocaml_lwt_Lwt_js_events = global_data.Js_of_ocaml_lwt__Lwt_js_events,
    Js_of_ocaml_Dom_html = global_data.Js_of_ocaml__Dom_html,
    Js_of_ocaml_Dom = global_data.Js_of_ocaml__Dom,
    document = Js_of_ocaml_Dom_html[2],
    world = caml_call1(Js_of_ocaml_Dom_html[4], "world"),
    creets = [0, 0],
    cst_px = cst_px$5,
    cst_px$0 = cst_px$5,
    cst_red = "red",
    cst_px$1 = cst_px$5,
    cst_px$2 = cst_px$5,
    cst_lime = cst_lime$1,
    cst_px$3 = cst_px$5,
    cst_px$4 = cst_px$5,
    cst_lime$0 = cst_lime$1;
   function move_creet(t13, state){
    if(1 - state[6]){
     var w = world.clientWidth, h = world.clientHeight;
     if(caml_call1(Stdlib_Random[10], 1.) < 0.01){
      var
       new_dx = caml_call1(Stdlib_Random[5], 5) - 2 | 0,
       new_dy = caml_call1(Stdlib_Random[5], 5) - 2 | 0;
      if(0 !== new_dx) state[3] = new_dx;
      if(0 !== new_dy) state[4] = new_dy;
     }
     else{
      var _m_ = 0 === state[3] ? 1 : 0, _n_ = _m_ || (0 === state[4] ? 1 : 0);
      if(_n_){
       var
        _o_ =
          0 === state[3]
           ? caml_call1(Stdlib_Random[11], 0) ? 1 : -1
           : state[3];
       state[3] = _o_;
       var
        _p_ =
          0 === state[4]
           ? caml_call1(Stdlib_Random[11], 0) ? 1 : -1
           : state[4];
       state[4] = _p_;
      }
     }
     var nx = state[1] + state[3] | 0, ny = state[2] + state[4] | 0;
     a:
     {
      if(0 <= nx && (w - 20 | 0) >= nx){
       var nx$0 = nx, dx = state[3];
       break a;
      }
      var
       _q_ = caml_call2(Stdlib[16], w - 20 | 0, nx),
       _r_ = caml_call2(Stdlib[17], 0, _q_),
       nx$0 = _r_,
       dx = - state[3] | 0;
     }
     a:
     {
      if(0 <= ny && (h - 20 | 0) >= ny){
       var ny$0 = ny, dy = state[4];
       break a;
      }
      var
       _s_ = caml_call2(Stdlib[16], h - 20 | 0, ny),
       _t_ = caml_call2(Stdlib[17], 0, _s_),
       ny$0 = _t_,
       dy = - state[4] | 0;
     }
     state[3] = dx;
     state[4] = dy;
     state[1] = nx$0;
     state[2] = ny$0;
     var _u_ = state[2] < 50 ? 1 : 0;
     if(_u_)
      var _v_ = 1 - state[5], _w_ = _v_ ? 1 - state[6] : _v_;
     else
      var _w_ = _u_;
     if(_w_) state[5] = 1;
     if(state[5])
      caml_call2
       (Stdlib_List[17],
        function(param){
         var
          other = param[2],
          _C_ = 1 - other[5],
          _D_ = _C_ ? 1 - other[6] : _C_;
         if(_D_)
          var
           _A_ = caml_call1(Stdlib[18], state[1] - other[1] | 0) < 20 ? 1 : 0,
           _B_ =
             _A_
              ? caml_call1(Stdlib[18], state[2] - other[2] | 0) < 20 ? 1 : 0
              : _A_,
           _E_ = _B_ ? caml_call1(Stdlib_Random[10], 1.) < 0.3 ? 1 : 0 : _B_,
           _F_ = _E_ ? (other[5] = 1, 0) : _E_;
         else
          var _F_ = _D_;
         return _F_;
        },
        creets[1]);
     var
      _x_ = state[5] ? cst_red : cst_lime,
      t14 = caml_jsstring_of_string(_x_),
      t15 = t13.style;
     t15.backgroundColor = t14;
     var
      _y_ = caml_call1(Stdlib[33], state[1]),
      t17 = caml_jsstring_of_string(caml_call2(Stdlib[28], _y_, cst_px$1)),
      t18 = t13.style;
     t18.left = t17;
     var
      _z_ = caml_call1(Stdlib[33], state[2]),
      t20 = caml_jsstring_of_string(caml_call2(Stdlib[28], _z_, cst_px$2)),
      t21 = t13.style;
     t21.top = t20;
    }
    var
     delay = state[5] ? 0.05 : 0.03,
     ppx_lwt_0 = caml_call1(Js_of_ocaml_lwt_Lwt_js[1], delay);
    return caml_call3
            (Lwt[81],
             function(exn){
              try{throw caml_maybe_attach_backtrace(exn, 0);}
              catch(exn){var exn$0 = caml_wrap_exception(exn); return exn$0;}
             },
             ppx_lwt_0,
             function(param){return move_creet(t13, state);});
   }
   function add_creet(color, x, y){
    var t24 = caml_call1(Js_of_ocaml_Dom_html[51], document);
    t24.className = "creet";
    var t3 = caml_jsstring_of_string(color), t4 = t24.style;
    t4.backgroundColor = t3;
    var
     _a_ = caml_call1(Stdlib[33], x),
     t6 = caml_jsstring_of_string(caml_call2(Stdlib[28], _a_, cst_px)),
     t7 = t24.style;
    t7.left = t6;
    var
     _b_ = caml_call1(Stdlib[33], y),
     t9 = caml_jsstring_of_string(caml_call2(Stdlib[28], _b_, cst_px$0)),
     t10 = t24.style;
    t10.top = t9;
    caml_call2(Js_of_ocaml_Dom[5], world, t24);
    var
     v = caml_call1(Stdlib_Random[5], 5) - 2 | 0,
     _c_ = 0,
     _d_ = 0,
     _e_ = 0 === v ? 1 : v,
     v$0 = caml_call1(Stdlib_Random[5], 5) - 2 | 0,
     _f_ = 0 === v$0 ? 1 : v$0,
     state = [0, x, y, _f_, _e_, _d_, _c_];
    creets[1] = [0, [0, t24, state], creets[1]];
    caml_call1(Lwt[11], function(param){return move_creet(t24, state);});
    return caml_call1
            (Lwt[11],
             function(param){
              var
               offset_x = [0, 0],
               offset_y = [0, 0],
               world_rect = [0, world.getBoundingClientRect()];
              caml_call1
               (Lwt[11],
                function(param){
                 return caml_call5
                         (Js_of_ocaml_lwt_Lwt_js_events[82],
                          0,
                          0,
                          0,
                          t24,
                          function(t25, param){
                           state[6] = 1;
                           world_rect[1] = world.getBoundingClientRect();
                           var rect = t24.getBoundingClientRect();
                           offset_x[1] = t25.clientX - rect.left | 0;
                           offset_y[1] = t25.clientY - rect.top | 0;
                           return Lwt[36];
                          });
                });
              caml_call1
               (Lwt[11],
                function(param){
                 return caml_call5
                         (Js_of_ocaml_lwt_Lwt_js_events[83],
                          0,
                          0,
                          0,
                          document,
                          function(param, _i_){
                           var h = world.clientHeight, _j_ = state[6];
                           if(_j_)
                            var
                             _k_ = state[5],
                             _l_ = _k_ ? (h - 70 | 0) < state[2] ? 1 : 0 : _k_;
                           else
                            var _l_ = _j_;
                           if(_l_) state[5] = 0;
                           state[6] = 0;
                           return Lwt[36];
                          });
                });
              caml_call1
               (Lwt[11],
                function(param){
                 return caml_call5
                         (Js_of_ocaml_lwt_Lwt_js_events[85],
                          0,
                          0,
                          0,
                          document,
                          function(t30, param){
                           if(state[6]){
                            var
                             t31 = world_rect[1],
                             nx = (t30.clientX - t31.left | 0) - offset_x[1] | 0,
                             ny = (t30.clientY - t31.top | 0) - offset_y[1] | 0;
                            state[1] = nx;
                            state[2] = ny;
                            var
                             _g_ = caml_call1(Stdlib[33], nx),
                             t35 =
                               caml_jsstring_of_string
                                (caml_call2(Stdlib[28], _g_, cst_px$3)),
                             t36 = t24.style;
                            t36.left = t35;
                            var
                             _h_ = caml_call1(Stdlib[33], ny),
                             t38 =
                               caml_jsstring_of_string
                                (caml_call2(Stdlib[28], _h_, cst_px$4)),
                             t39 = t24.style;
                            t39.top = t38;
                           }
                           return Lwt[36];
                          });
                });
              return Lwt[36];
             });
   }
   function reproduction_loop(param){
    var
     healthy_exists =
       caml_call2
        (Stdlib_List[33],
         function(param){var st = param[2]; return 1 - st[5];},
         creets[1]);
    if(healthy_exists && caml_call1(Stdlib_Random[10], 1.) < 0.3){
     var
      x = caml_call1(Stdlib_Random[5], world.clientWidth - 30 | 0),
      y = caml_call1(Stdlib_Random[5], world.clientHeight - 30 | 0);
     add_creet(cst_lime$0, x, y);
    }
    var ppx_lwt_0 = caml_call1(Js_of_ocaml_lwt_Lwt_js[1], 2.);
    return caml_call3
            (Lwt[81],
             function(exn){
              try{throw caml_maybe_attach_backtrace(exn, 0);}
              catch(exn){var exn$0 = caml_wrap_exception(exn); return exn$0;}
             },
             ppx_lwt_0,
             function(param){return reproduction_loop(0);});
   }
   caml_call1(Stdlib_Random[3], 0);
   add_creet(cst_lime$1, 200, 200);
   caml_call1(Lwt[11], reproduction_loop);
   var Dune_exe_Main = [0];
   runtime.caml_register_global(62, Dune_exe_Main, "Dune__exe__Main");
   return;
  }
  (globalThis));

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLm1haW4uZW9ianMvanNvby9kdW5lX19leGVfX01haW4uY21vLmpzIiwic2VjdGlvbnMiOlt7Im9mZnNldCI6eyJsaW5lIjo5LCJjb2x1bW4iOjB9LCJtYXAiOnsidmVyc2lvbiI6MywiZmlsZSI6Ii5tYWluLmVvYmpzL2pzb28vZHVuZV9fZXhlX19NYWluLmNtby5qcyIsIm5hbWVzIjpbInJ1bnRpbWUiLCJjc3RfbGltZSIsImNzdF9weCIsImNhbWxfanNzdHJpbmdfb2Zfc3RyaW5nIiwiY2FtbF9tYXliZV9hdHRhY2hfYmFja3RyYWNlIiwiY2FtbF93cmFwX2V4Y2VwdGlvbiIsImNhbWxfY2FsbDEiLCJmIiwiYTAiLCJjYW1sX2NhbGwyIiwiYTEiLCJjYW1sX2NhbGwzIiwiYTIiLCJjYW1sX2NhbGw1IiwiYTMiLCJhNCIsImdsb2JhbF9kYXRhIiwiU3RkbGliIiwiSnNfb2Zfb2NhbWxfbHd0X0x3dF9qcyIsIkx3dCIsIlN0ZGxpYl9MaXN0IiwiU3RkbGliX1JhbmRvbSIsIkpzX29mX29jYW1sX2x3dF9Md3RfanNfZXZlbnRzIiwiSnNfb2Zfb2NhbWxfRG9tX2h0bWwiLCJKc19vZl9vY2FtbF9Eb20iLCJkb2N1bWVudCIsIndvcmxkIiwiY3JlZXRzIiwiY3N0X3JlZCIsIm1vdmVfY3JlZXQiLCJ0MTMiLCJzdGF0ZSIsInciLCJoIiwibmV3X2R4IiwibmV3X2R5IiwibngiLCJueSIsImR4IiwiZHkiLCJwYXJhbSIsIm90aGVyIiwidDE0IiwidDE1IiwidDE3IiwidDE4IiwidDIwIiwidDIxIiwiZGVsYXkiLCJwcHhfbHd0XzAiLCJleG4iLCJhZGRfY3JlZXQiLCJjb2xvciIsIngiLCJ5IiwidDI0IiwidDMiLCJ0NCIsInQ2IiwidDciLCJ0OSIsInQxMCIsInYiLCJvZmZzZXRfeCIsIm9mZnNldF95Iiwid29ybGRfcmVjdCIsInQyNSIsInJlY3QiLCJ0MzAiLCJ0MzEiLCJ0MzUiLCJ0MzYiLCJ0MzgiLCJ0MzkiLCJyZXByb2R1Y3Rpb25fbG9vcCIsImhlYWx0aHlfZXhpc3RzIiwic3QiLCJEdW5lX2V4ZV9NYWluIl0sInNvdXJjZXMiOlsiL2J1aWx0aW4vYmxhY2tib3gubWwiLCIvd29ya3NwYWNlX3Jvb3QvbWFpbi5tbCJdLCJtYXBwaW5ncyI6IklBQUFBLFVBQUE7QUFBQSxJQUFBQyxhQUFBO0FBQUEsSUFBQUMsV0FBQTtBQUFBLElBQUFDLDBCQUFBO0FBQUEsSUFBQUMsOEJBQUE7QUFBQSxJQUFBQyxzQkFBQTtBQUFBLFlBQUFDLFdBQUFDLEdBQUFDO0FBQUFBLElBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxZQUFBQyxXQUFBRixHQUFBQyxJQUFBRTtBQUFBQSxJQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsWUFBQUMsV0FBQUosR0FBQUMsSUFBQUUsSUFBQUU7QUFBQUEsSUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLFlBQUFDLFdBQUFOLEdBQUFDLElBQUFFLElBQUFFLElBQUFFLElBQUFDO0FBQUFBLElBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLElBQUFDLGNBQUE7QUFBQSxJQUFBQyxTQUFBO0FBQUEsSUFBQUMseUJBQUE7QUFBQSxJQUFBQyxNQUFBO0FBQUEsSUFBQUMsY0FBQTtBQUFBLElBQUFDLGdCQUFBO0FBQUEsSUFBQUMsZ0NBQUE7QUFBQSxJQUFBQyx1QkFBQTtBQUFBLElBQUFDLGtCQUFBO0FBQUEsSUFBQUMsV0FBQTtBQUFBLElBQUFDLFFDSVk7QUFBQSxJQUFBQyxTQUFtQztBQUFBLElBQUF6QixTQUFBO0FBQUEsSUFBQUEsV0FBQTtBQUFBLElBQUEwQixVQUFBO0FBQUEsSUFBQTFCLFdBQUE7QUFBQSxJQUFBQSxXQUFBO0FBQUEsSUFBQUQsV0FBQTtBQUFBLElBQUFDLFdBQUE7QUFBQSxJQUFBQSxXQUFBO0FBQUEsSUFBQUQsYUFBQTtBQUFBLFlBQUE0QixXQUFBQyxLQUFBQztBQUFBQSxJQTBEN0M7QUFBQSxTQUFBQyxJQUNVLG1CQUFBQyxJQUE0QjtBQUFBLEtBZG5DO0FBQUE7QUFBQSxPQUFBQyxTQUNZO0FBQUEsT0FBQUMsU0FDQTtB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IEpzX29mX29jYW1sX2x3dFxyXG5cclxubGV0IGRvY3VtZW50ID0gRG9tX2h0bWwuZG9jdW1lbnRcclxubGV0IHdvcmxkID0gRG9tX2h0bWwuZ2V0RWxlbWVudEJ5SWRfZXhuIFwid29ybGRcIlxyXG5cclxuKCog0KHQvtGB0YLQvtGP0L3QuNC1INGB0YPRidC10YHRgtCy0LAgKilcclxudHlwZSBjcmVldF9zdGF0ZSA9IHtcclxuICBtdXRhYmxlIHg6IGludDtcclxuICBtdXRhYmxlIHk6IGludDtcclxuICBtdXRhYmxlIGR4OiBpbnQ7XHJcbiAgbXV0YWJsZSBkeTogaW50O1xyXG4gIG11dGFibGUgaW5mZWN0ZWQ6IGJvb2w7XHJcbiAgbXV0YWJsZSBpc19iZWluZ19kcmFnZ2VkOiBib29sO1xyXG59XHJcblxyXG4oKiDQktGB0LUgQ3JlZXQn0YsgKilcclxubGV0IGNyZWV0cyA6IChEb21faHRtbC5kaXZFbGVtZW50IEpzLnQgKiBjcmVldF9zdGF0ZSkgbGlzdCByZWYgPSByZWYgW11cclxuXHJcbigqINCh0L7Qt9C00LDQvdC40LUgRE9NLdGN0LvQtdC80LXQvdGC0LAgKilcclxubGV0IGNyZWF0ZV9jcmVldCBjb2xvciB4IHkgPVxyXG4gIGxldCBkID0gRG9tX2h0bWwuY3JlYXRlRGl2IGRvY3VtZW50IGluXHJcbiAgZCMjLmNsYXNzTmFtZSA6PSBKcy5zdHJpbmcgXCJjcmVldFwiO1xyXG4gIGQjIy5zdHlsZSMjLmJhY2tncm91bmRDb2xvciA6PSBKcy5zdHJpbmcgY29sb3I7XHJcbiAgZCMjLnN0eWxlIyMubGVmdCA6PSBKcy5zdHJpbmcgKHN0cmluZ19vZl9pbnQgeCBeIFwicHhcIik7XHJcbiAgZCMjLnN0eWxlIyMudG9wIDo9IEpzLnN0cmluZyAoc3RyaW5nX29mX2ludCB5IF4gXCJweFwiKTtcclxuICBEb20uYXBwZW5kQ2hpbGQgd29ybGQgZDtcclxuICBkXHJcblxyXG4oKiDQn9GA0L7QstC10YDQutCwINC/0LXRgNC10YHQtdGH0LXQvdC40Y8g0LTQstGD0YUgQ3JlZXQn0L7QsiAqKVxyXG5sZXQgaXNfdG91Y2hpbmcgc3QxIHN0MiA9XHJcbiAgbGV0IHNpemUgPSAyMCBpblxyXG4gIGFicyAoc3QxLnggLSBzdDIueCkgPCBzaXplICYmIGFicyAoc3QxLnkgLSBzdDIueSkgPCBzaXplXHJcblxyXG4oKiDQn9C+0L/Ri9GC0LrQsCDQt9Cw0YDQsNC30LjRgtGMINC00YDRg9Cz0LjRhSAqKVxyXG5sZXQgdHJ5X2luZmVjdF9vdGhlcnMgKGQsIHN0KSA9XHJcbiAgbGV0IF8gPSBkIGluXHJcbiAgaWYgc3QuaW5mZWN0ZWQgdGhlbiAoXHJcbiAgICBMaXN0Lml0ZXIgKGZ1biAoXywgb3RoZXIpIC0+XHJcbiAgICAgIGlmIG5vdCBvdGhlci5pbmZlY3RlZCAmJiBub3Qgb3RoZXIuaXNfYmVpbmdfZHJhZ2dlZCB0aGVuIChcclxuICAgICAgICBpZiBpc190b3VjaGluZyBzdCBvdGhlciAmJiBSYW5kb20uZmxvYXQgMS4wIDwgMC4zIHRoZW4gKFxyXG4gICAgICAgICAgb3RoZXIuaW5mZWN0ZWQgPC0gdHJ1ZTtcclxuICAgICAgICApXHJcbiAgICAgIClcclxuICAgICkgIWNyZWV0c1xyXG4gIClcclxuXHJcbigqINCh0LvRg9GH0LDQudC90LDRjyDQvdC10LHQvtC70YzRiNCw0Y8g0YHQvNC10L3QsCDQvdCw0L/RgNCw0LLQu9C10L3QuNGPICopXHJcbmxldCBtYXliZV9jaGFuZ2VfZGlyZWN0aW9uIHN0YXRlID1cclxuICBpZiBSYW5kb20uZmxvYXQgMS4wIDwgMC4wMSB0aGVuICggICgqINC/0YDQuNC80LXRgNC90L4gMSUg0YjQsNC90YEg0L3QsCDRgtC40LogKilcclxuICAgIGxldCBuZXdfZHggPSAoUmFuZG9tLmludCA1KSAtIDIgaW5cclxuICAgIGxldCBuZXdfZHkgPSAoUmFuZG9tLmludCA1KSAtIDIgaW5cclxuICAgIGlmIG5ld19keCA8PiAwIHRoZW4gc3RhdGUuZHggPC0gbmV3X2R4O1xyXG4gICAgaWYgbmV3X2R5IDw+IDAgdGhlbiBzdGF0ZS5keSA8LSBuZXdfZHk7XHJcbiAgKVxyXG4gIGVsc2UgaWYgc3RhdGUuZHggPSAwIHx8IHN0YXRlLmR5ID0gMCB0aGVuICggICgqINGB0YLRgNCw0YXQvtCy0LrQsCDQvtGCIOKAnNC30LDQu9C40L/QsNC90LjRj+KAnSAqKVxyXG4gICAgc3RhdGUuZHggPC0gaWYgc3RhdGUuZHggPSAwIHRoZW4gKGlmIFJhbmRvbS5ib29sICgpIHRoZW4gMSBlbHNlIC0xKSBlbHNlIHN0YXRlLmR4O1xyXG4gICAgc3RhdGUuZHkgPC0gaWYgc3RhdGUuZHkgPSAwIHRoZW4gKGlmIFJhbmRvbS5ib29sICgpIHRoZW4gMSBlbHNlIC0xKSBlbHNlIHN0YXRlLmR5O1xyXG4gIClcclxuXHJcbigqINCQ0LLRgtC+0LzQsNGC0LjRh9C10YHQutC+0LUg0LTQstC40LbQtdC90LjQtSAqKVxyXG5sZXQgcmVjIG1vdmVfY3JlZXQgZCBzdGF0ZSA9XHJcbiAgaWYgbm90IHN0YXRlLmlzX2JlaW5nX2RyYWdnZWQgdGhlbiAoXHJcbiAgICBsZXQgdyA9IHdvcmxkIyMuY2xpZW50V2lkdGggYW5kIGggPSB3b3JsZCMjLmNsaWVudEhlaWdodCBpblxyXG5cclxuICAgICgqINCg0LXQtNC60L4g0LzQtdC90Y/QtdC8INC90LDQv9GA0LDQstC70LXQvdC40LUgKilcclxuICAgIG1heWJlX2NoYW5nZV9kaXJlY3Rpb24gc3RhdGU7XHJcblxyXG4gICAgbGV0IG54ID0gc3RhdGUueCArIHN0YXRlLmR4IGFuZCBueSA9IHN0YXRlLnkgKyBzdGF0ZS5keSBpblxyXG5cclxuICAgIGxldCBkeCwgbnggPVxyXG4gICAgICBpZiBueCA8IDAgfHwgbnggPiB3IC0gMjAgdGhlbiAoLXN0YXRlLmR4LCBtYXggMCAobWluICh3IC0gMjApIG54KSlcclxuICAgICAgZWxzZSAoc3RhdGUuZHgsIG54KVxyXG4gICAgaW5cclxuICAgIGxldCBkeSwgbnkgPVxyXG4gICAgICBpZiBueSA8IDAgfHwgbnkgPiBoIC0gMjAgdGhlbiAoLXN0YXRlLmR5LCBtYXggMCAobWluIChoIC0gMjApIG55KSlcclxuICAgICAgZWxzZSAoc3RhdGUuZHksIG55KVxyXG4gICAgaW5cclxuXHJcbiAgICBzdGF0ZS5keCA8LSBkeDtcclxuICAgIHN0YXRlLmR5IDwtIGR5O1xyXG4gICAgc3RhdGUueCA8LSBueDtcclxuICAgIHN0YXRlLnkgPC0gbnk7XHJcblxyXG4gICAgKCog0JfQsNGA0LDQttC10L3QuNC1INCyINCy0LXRgNGF0L3QtdC5INC30L7QvdC1IOKAlCDRgtC+0LvRjNC60L4g0LXRgdC70Lgg0L3QtSDQv9C10YDQtdGC0LDRgdC60LjQstCw0LXRgtGB0Y8gKilcclxuICAgIGlmIHN0YXRlLnkgPCA1MCAmJiBub3Qgc3RhdGUuaW5mZWN0ZWQgJiYgbm90IHN0YXRlLmlzX2JlaW5nX2RyYWdnZWQgdGhlbiAoXHJcbiAgICAgIHN0YXRlLmluZmVjdGVkIDwtIHRydWU7XHJcbiAgICApO1xyXG5cclxuICAgICgqINCf0L7Qv9GL0YLQutCwINC30LDRgNCw0LfQuNGC0Ywg0LTRgNGD0LPQuNGFINC/0YDQuCDQutC+0L3RgtCw0LrRgtC1ICopXHJcbiAgICB0cnlfaW5mZWN0X290aGVycyAoZCwgc3RhdGUpO1xyXG5cclxuICAgICgqINCe0LHQvdC+0LLQu9GP0LXQvCDRhtCy0LXRgiDQsiDRgdC+0L7RgtCy0LXRgtGB0YLQstC40Lgg0YEg0YHQvtGB0YLQvtGP0L3QuNC10LwgKilcclxuICAgIGQjIy5zdHlsZSMjLmJhY2tncm91bmRDb2xvciA6PVxyXG4gICAgICBKcy5zdHJpbmcgKGlmIHN0YXRlLmluZmVjdGVkIHRoZW4gXCJyZWRcIiBlbHNlIFwibGltZVwiKTtcclxuXHJcbiAgICBkIyMuc3R5bGUjIy5sZWZ0IDo9IEpzLnN0cmluZyAoc3RyaW5nX29mX2ludCBzdGF0ZS54IF4gXCJweFwiKTtcclxuICAgIGQjIy5zdHlsZSMjLnRvcCA6PSBKcy5zdHJpbmcgKHN0cmluZ19vZl9pbnQgc3RhdGUueSBeIFwicHhcIik7XHJcbiAgKTtcclxuXHJcbiAgbGV0IGRlbGF5ID0gaWYgc3RhdGUuaW5mZWN0ZWQgdGhlbiAwLjA1IGVsc2UgMC4wMyBpblxyXG4gIGxldCVsd3QgKCkgPSBMd3RfanMuc2xlZXAgZGVsYXkgaW5cclxuICBtb3ZlX2NyZWV0IGQgc3RhdGVcclxuXHJcbigqINCf0LXRgNC10YLQsNGB0LrQuNCy0LDQvdC40LUgKilcclxubGV0IG1ha2VfZHJhZ2dhYmxlIGQgc3RhdGUgPVxyXG4gIGxldCBvcGVuIEx3dF9qc19ldmVudHMgaW5cclxuICBsZXQgb2Zmc2V0X3ggPSByZWYgMCBhbmQgb2Zmc2V0X3kgPSByZWYgMCBpblxyXG4gIGxldCB3b3JsZF9yZWN0ID0gcmVmICh3b3JsZCMjZ2V0Qm91bmRpbmdDbGllbnRSZWN0KSBpblxyXG5cclxuICAoKiDQndCw0LbQsNGC0LjQtSDQvNGL0YjQuCDigJQg0L3QsNGH0LDRgtGMINC/0LXRgNC10YLQsNGB0LrQuNCy0LDQvdC40LUgKilcclxuICBMd3QuYXN5bmMgKGZ1biAoKSAtPlxyXG4gICAgbW91c2Vkb3ducyBkIChmdW4gZXYgXyAtPlxyXG4gICAgICBzdGF0ZS5pc19iZWluZ19kcmFnZ2VkIDwtIHRydWU7XHJcbiAgICAgIHdvcmxkX3JlY3QgOj0gd29ybGQjI2dldEJvdW5kaW5nQ2xpZW50UmVjdDtcclxuICAgICAgbGV0IHJlY3QgPSBkIyNnZXRCb3VuZGluZ0NsaWVudFJlY3QgaW5cclxuICAgICAgb2Zmc2V0X3ggOj0gaW50X29mX2Zsb2F0IChmbG9hdF9vZl9pbnQgZXYjIy5jbGllbnRYIC0uIHJlY3QjIy5sZWZ0KTtcclxuICAgICAgb2Zmc2V0X3kgOj0gaW50X29mX2Zsb2F0IChmbG9hdF9vZl9pbnQgZXYjIy5jbGllbnRZIC0uIHJlY3QjIy50b3ApO1xyXG4gICAgICBMd3QucmV0dXJuX3VuaXQpXHJcbiAgKTtcclxuXHJcbiAgKCog0J7RgtC/0YPRgdC60LDQvdC40LUg0LzRi9GI0Lgg4oCUINC30LDQutC+0L3Rh9C40YLRjCDQv9C10YDQtdGC0LDRgdC60LjQstCw0L3QuNC1INC4INCy0L7Qt9C80L7QttC90L4g0LLRi9C70LXRh9C40YLRjCAqKVxyXG4gIEx3dC5hc3luYyAoZnVuICgpIC0+XHJcbiAgICBtb3VzZXVwcyBkb2N1bWVudCAoZnVuIF8gXyAtPlxyXG4gICAgICBsZXQgaCA9IHdvcmxkIyMuY2xpZW50SGVpZ2h0IGluXHJcbiAgICAgIGlmIHN0YXRlLmlzX2JlaW5nX2RyYWdnZWQgJiYgc3RhdGUuaW5mZWN0ZWQgJiYgc3RhdGUueSA+IGggLSA3MCB0aGVuIChcclxuICAgICAgICBzdGF0ZS5pbmZlY3RlZCA8LSBmYWxzZTtcclxuICAgICAgKTtcclxuICAgICAgc3RhdGUuaXNfYmVpbmdfZHJhZ2dlZCA8LSBmYWxzZTtcclxuICAgICAgTHd0LnJldHVybl91bml0KVxyXG4gICk7XHJcblxyXG4gICgqINCU0LLQuNC20LXQvdC40LUg0LzRi9GI0Lgg4oCUINC+0LHQvdC+0LLQu9GP0LXQvCDQv9C+0LfQuNGG0LjRjiAqKVxyXG4gIEx3dC5hc3luYyAoZnVuICgpIC0+XHJcbiAgICBtb3VzZW1vdmVzIGRvY3VtZW50IChmdW4gZXYgXyAtPlxyXG4gICAgICBpZiBzdGF0ZS5pc19iZWluZ19kcmFnZ2VkIHRoZW4gKFxyXG4gICAgICAgIGxldCB3ciA9ICF3b3JsZF9yZWN0IGluXHJcbiAgICAgICAgbGV0IG54ID0gaW50X29mX2Zsb2F0IChmbG9hdF9vZl9pbnQgZXYjIy5jbGllbnRYIC0uIHdyIyMubGVmdCkgLSAhb2Zmc2V0X3ggaW5cclxuICAgICAgICBsZXQgbnkgPSBpbnRfb2ZfZmxvYXQgKGZsb2F0X29mX2ludCBldiMjLmNsaWVudFkgLS4gd3IjIy50b3ApIC0gIW9mZnNldF95IGluXHJcbiAgICAgICAgc3RhdGUueCA8LSBueDtcclxuICAgICAgICBzdGF0ZS55IDwtIG55O1xyXG4gICAgICAgIGQjIy5zdHlsZSMjLmxlZnQgOj0gSnMuc3RyaW5nIChzdHJpbmdfb2ZfaW50IG54IF4gXCJweFwiKTtcclxuICAgICAgICBkIyMuc3R5bGUjIy50b3AgOj0gSnMuc3RyaW5nIChzdHJpbmdfb2ZfaW50IG55IF4gXCJweFwiKTtcclxuICAgICAgKTtcclxuICAgICAgTHd0LnJldHVybl91bml0KVxyXG4gICk7XHJcblxyXG4gIEx3dC5yZXR1cm5fdW5pdFxyXG5cclxuKCog0JTQvtCx0LDQstC70LXQvdC40LUg0L3QvtCy0L7Qs9C+IENyZWV0ICopXHJcbmxldCBhZGRfY3JlZXQgY29sb3IgeCB5ID1cclxuICBsZXQgZCA9IGNyZWF0ZV9jcmVldCBjb2xvciB4IHkgaW5cclxuICBsZXQgc3RhdGUgPSB7XHJcbiAgICB4OyB5O1xyXG4gICAgZHggPSAobGV0IHYgPSAoUmFuZG9tLmludCA1KSAtIDIgaW4gaWYgdiA9IDAgdGhlbiAxIGVsc2Ugdik7XHJcbiAgICBkeSA9IChsZXQgdiA9IChSYW5kb20uaW50IDUpIC0gMiBpbiBpZiB2ID0gMCB0aGVuIDEgZWxzZSB2KTtcclxuICAgIGluZmVjdGVkID0gZmFsc2U7XHJcbiAgICBpc19iZWluZ19kcmFnZ2VkID0gZmFsc2U7XHJcbiAgfSBpblxyXG4gIGNyZWV0cyA6PSAoZCwgc3RhdGUpIDo6ICFjcmVldHM7XHJcbiAgTHd0LmFzeW5jIChmdW4gKCkgLT4gbW92ZV9jcmVldCBkIHN0YXRlKTtcclxuICBMd3QuYXN5bmMgKGZ1biAoKSAtPiBtYWtlX2RyYWdnYWJsZSBkIHN0YXRlKVxyXG5cclxuKCog0KDQsNC30LzQvdC+0LbQtdC90LjQtSAqKVxyXG5sZXQgcmVjIHJlcHJvZHVjdGlvbl9sb29wICgpID1cclxuICBsZXQgaGVhbHRoeV9leGlzdHMgPSBMaXN0LmV4aXN0cyAoZnVuIChfLCBzdCkgLT4gbm90IHN0LmluZmVjdGVkKSAhY3JlZXRzIGluXHJcbiAgaWYgaGVhbHRoeV9leGlzdHMgdGhlbiAoXHJcbiAgICBpZiBSYW5kb20uZmxvYXQgMS4wIDwgMC4zIHRoZW4gKFxyXG4gICAgICBsZXQgeCA9IFJhbmRvbS5pbnQgKHdvcmxkIyMuY2xpZW50V2lkdGggLSAzMCkgaW5cclxuICAgICAgbGV0IHkgPSBSYW5kb20uaW50ICh3b3JsZCMjLmNsaWVudEhlaWdodCAtIDMwKSBpblxyXG4gICAgICBhZGRfY3JlZXQgXCJsaW1lXCIgeCB5O1xyXG4gICAgKVxyXG4gICk7XHJcbiAgbGV0JWx3dCAoKSA9IEx3dF9qcy5zbGVlcCAyLjAgaW5cclxuICByZXByb2R1Y3Rpb25fbG9vcCAoKVxyXG5cclxuKCogbWFpbiAqKVxyXG5sZXQgKCkgPVxyXG4gIFJhbmRvbS5zZWxmX2luaXQgKCk7XHJcbiAgYWRkX2NyZWV0IFwibGltZVwiIDIwMCAyMDA7XHJcbiAgTHd0LmFzeW5jIHJlcHJvZHVjdGlvbl9sb29wXHJcbiJdLCJpZ25vcmVMaXN0IjpbMF19fV19
